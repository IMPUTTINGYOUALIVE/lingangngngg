(()=>{var e={4322:function(e){var t={decodeValues:!0,map:!1,silent:!1};function r(e){return"string"==typeof e&&!!e.trim()}function n(e,n){var i,s,o,a,l=e.split(";").filter(r),c=(i=l.shift(),s="",o="",(a=i.split("=")).length>1?(s=a.shift(),o=a.join("=")):o=i,{name:s,value:o}),u=c.name,d=c.value;n=n?Object.assign({},t,n):t;try{d=n.decodeValues?decodeURIComponent(d):d}catch(e){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+d+"'. Set options.decodeValues to false to disable this feature.",e)}var h={name:u,value:d};return l.forEach(function(e){var t=e.split("="),r=t.shift().trimLeft().toLowerCase(),n=t.join("=");"expires"===r?h.expires=new Date(n):"max-age"===r?h.maxAge=parseInt(n,10):"secure"===r?h.secure=!0:"httponly"===r?h.httpOnly=!0:"samesite"===r?h.sameSite=n:"partitioned"===r?h.partitioned=!0:h[r]=n}),h}function i(e,i){if(i=i?Object.assign({},t,i):t,!e)if(!i.map)return[];else return{};if(e.headers)if("function"==typeof e.headers.getSetCookie)e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var s=e.headers[Object.keys(e.headers).find(function(e){return"set-cookie"===e.toLowerCase()})];s||!e.headers.cookie||i.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=s}return(Array.isArray(e)||(e=[e]),i.map)?e.filter(r).reduce(function(e,t){var r=n(t,i);return e[r.name]=r,e},{}):e.filter(r).map(function(e){return n(e,i)})}e.exports=i,e.exports.parse=i,e.exports.parseString=n,e.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!=typeof e)return[];var t,r,n,i,s,o=[],a=0;function l(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}for(;a<e.length;){for(t=a,s=!1;l();)if(","===(r=e.charAt(a))){for(n=a,a+=1,l(),i=a;a<e.length&&"="!==(r=e.charAt(a))&&";"!==r&&","!==r;)a+=1;a<e.length&&"="===e.charAt(a)?(s=!0,a=i,o.push(e.substring(t,n)),t=a):a=n+1}else a+=1;(!s||a>=e.length)&&o.push(e.substring(t,e.length))}return o}},7302:function(e,t,r){var n={"./":"3255","./client":"336","./client.ts":"336","./dom/attr":"1077","./dom/attr.ts":"1077","./dom/beacon":"7430","./dom/beacon.ts":"7430","./dom/cookie":"9116","./dom/cookie.ts":"9116","./dom/css":"6447","./dom/css.ts":"6447","./dom/document":"5351","./dom/document.ts":"5351","./dom/element":"7828","./dom/element.ts":"7828","./dom/fontface":"5426","./dom/fontface.ts":"5426","./dom/fragments":"5465","./dom/fragments.ts":"5465","./dom/history":"9804","./dom/history.ts":"9804","./dom/open":"7758","./dom/open.ts":"7758","./dom/origin":"6012","./dom/origin.ts":"6012","./dom/performance":"6286","./dom/performance.ts":"6286","./dom/protocol":"1974","./dom/protocol.ts":"1974","./dom/serviceworker":"9201","./dom/serviceworker.ts":"9201","./dom/storage":"5289","./dom/storage.ts":"5289","./entry":"1323","./entry.ts":"1323","./events":"1862","./events.ts":"1862","./helpers":"94","./helpers.ts":"94","./index":"3255","./index.ts":"3255","./location":"3696","./location.ts":"3696","./shared/antiantidebugger":"8382","./shared/antiantidebugger.ts":"8382","./shared/blob":"4634","./shared/blob.ts":"4634","./shared/caches":"5026","./shared/caches.ts":"5026","./shared/chrome":"6627","./shared/chrome.ts":"6627","./shared/err":"582","./shared/err.ts":"582","./shared/error":"6143","./shared/error.ts":"6143","./shared/eval":"591","./shared/eval.ts":"591","./shared/event":"3481","./shared/event.ts":"3481","./shared/function":"249","./shared/function.ts":"249","./shared/import":"2468","./shared/import.ts":"2468","./shared/indexeddb":"4338","./shared/indexeddb.ts":"4338","./shared/opfs":"6593","./shared/opfs.ts":"6593","./shared/postmessage":"1320","./shared/postmessage.ts":"1320","./shared/realm":"1914","./shared/realm.ts":"1914","./shared/requests/eventsource":"9701","./shared/requests/eventsource.ts":"9701","./shared/requests/fetch":"6972","./shared/requests/fetch.ts":"6972","./shared/requests/websocket":"9931","./shared/requests/websocket.ts":"9931","./shared/requests/xmlhttprequest":"248","./shared/requests/xmlhttprequest.ts":"248","./shared/sourcemaps":"7791","./shared/sourcemaps.ts":"7791","./shared/worker":"9399","./shared/worker.ts":"9399","./shared/wrap":"581","./shared/wrap.ts":"581","./singletonbox":"1229","./singletonbox.ts":"1229","./swruntime":"8409","./swruntime.ts":"8409","./worker/importScripts":"9353","./worker/importScripts.ts":"9353"};function i(e){return r(s(e))}function s(e){if(!r.o(n,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=7302},409:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=409,e.exports=t},336:function(e,t,r){r.r(t),r.d(t,{ScramjetClient:()=>g});var n=r(2794),i=r(94),s=r(3696),o=r(581),a=r(1862),l=r(1472),c=r(37),u=r(3831),d=r(1323),h=r(1229),p=r(236),f=r(8665).A;class g{global;locationProxy;serviceWorker;bare;natives;descriptors;wrapfn;cookieStore=new u.k;eventcallbacks=new Map;meta;box;constructor(e){if(this.global=e,n.pX in e)throw console.error("attempted to initialize a scramjet client, but one is already loaded - this is very bad"),Error();d.iswindow?n.pX in e.parent?this.box=e.parent[n.pX].box:n.pX in e.top?this.box=e.top[n.pX].box:e.opener&&n.pX in e.opener?this.box=e.opener[n.pX].box:(f.warn("Creating SingletonBox"),this.box=new h.SingletonBox(this)):this.box=new h.SingletonBox(this),this.box.registerClient(this,e),d.iswindow?this.bare=new p.Ay:this.bare=new p.Ay(new Promise(e=>{addEventListener("message",({data:t})=>{"object"==typeof t&&"$scramjet$type"in t&&"baremuxinit"===t.$scramjet$type&&e(t.port)})})),this.serviceWorker=this.global.navigator.serviceWorker,d.iswindow&&(e.document[n.pX]=this),this.wrapfn=(0,o.createWrapFn)(this,e),this.natives={store:new Proxy({},{get:(e,t)=>{if(t in e)return e[t];let r=t.split("."),n=r.pop(),i=r.reduce((e,t)=>e?.[t],this.global);if(!i)return;let s=Reflect.get(i,n);return e[t]=s,e[t]}}),construct(e,...t){let r=this.store[e];return r?new r(...t):null},call(e,t,...r){let n=this.store[e];return n?n.call(t,...r):null}},this.descriptors={store:new Proxy({},{get:(e,r)=>{if(r in e)return e[r];let n=r.split("."),i=n.pop(),s=n.reduce((e,t)=>e?.[t],this.global);if(!s)return;let o=t.natives.call("Object.getOwnPropertyDescriptor",null,s,i);return e[r]=o,e[r]}}),get(e,t){let r=this.store[e];return r?r.get.call(t):null},set(e,t,r){let n=this.store[e];if(!n)return null;n.set.call(t,r)}};let t=this;this.meta={get origin(){return t.url},get base(){if(d.iswindow){let e=t.natives.call("Document.prototype.querySelector",t.global.document,"base");if(e){let r=e.getAttribute("href");if(!r)return t.url;let n=r.indexOf("#");if(!(r=r.substring(0,-1===n?void 0:n)))return t.url;return new URL(r,t.url.origin)}}return t.url},get topFrameName(){if(!d.iswindow)throw Error("topFrameName was called from a worker?");let e=t.global;if(e.parent.window==e.window)return null;for(;e.parent.window!==e.window&&e.parent.window[n.pX];)e=e.parent.window;let r=e[n.pX].descriptors.get("window.frameElement",e);if(!r)return null;if(!r.name)return console.error("YOU NEED TO USE `new ScramjetFrame()`! DIRECT IFRAMES WILL NOT WORK"),null;return r.name},get parentFrameName(){if(!d.iswindow)throw Error("parentFrameName was called from a worker?");if(t.global.parent.window==t.global.window)return null;let e=t.global.parent.window;if(e[n.pX]){let t=e[n.pX].descriptors.get("window.frameElement",e);if(!t)return null;if(!t.name)return console.error("YOU NEED TO USE `new ScramjetFrame()`! DIRECT IFRAMES WILL NOT WORK"),null;return t.name}{let e=t.descriptors.get("window.frameElement",t.global);if(!e.name)return console.error("YOU NEED TO USE `new ScramjetFrame()`! DIRECT IFRAMES WILL NOT WORK"),null;return e.name}}},this.locationProxy=(0,s.createLocationProxy)(this,e),e[n.pX]=this}get frame(){if(!d.iswindow)return null;let e=this.descriptors.get("window.frameElement",this.global);if(!e)return null;let t=e[n.zr];if(!t){let e=this.global.window;for(;e.parent!==e;){let t=e[n.pX].descriptors.get("window.frameElement",e);if(!t)return null;if(t&&t[n.zr])return t[n.zr];e=e.parent.window}}return t}get isSubframe(){if(!d.iswindow)return!1;let e=this.descriptors.get("window.frameElement",this.global);return!!e&&!e[n.zr]}loadcookies(e){this.cookieStore.load(e)}hook(){let e=r(7302),t=[];for(let r of e.keys()){let n=e(r);r.endsWith(".ts")&&(r.startsWith("./dom/")&&"window"in this.global||r.startsWith("./worker/")&&"WorkerGlobalScope"in this.global||r.startsWith("./shared/"))&&t.push(n)}for(let e of(t.sort((e,t)=>(e.order||0)-(t.order||0)),t))!e.enabled||e.enabled(this)?e.default(this,this.global):e.disabled&&e.disabled(this,this.global)}get url(){return new URL((0,l.v2)(this.global.location.href))}set url(e){e instanceof URL&&(e=e.toString());let t=new a.NavigateEvent(e);this.frame&&this.frame.dispatchEvent(t),t.defaultPrevented||(this.global.location.href=(0,l.Oy)(t.url,this.meta))}Proxy(e,t){if(Array.isArray(e)){for(let r of e)this.Proxy(r,t);return}let r=e.split("."),n=r.pop(),i=r.reduce((e,t)=>e?.[t],this.global);if(i){if(!(e in this.natives.store)){let t=Reflect.get(i,n);this.natives.store[e]=t}this.RawProxy(i,n,t)}}RawProxy(e,t,r){if(!e||!t||!Reflect.has(e,t))return;let n=Reflect.get(e,t);delete e[t];let s={};r.construct&&(s.construct=function(e,t,n){let i,s=!1,o={fn:e,this:null,args:t,newTarget:n,return:e=>{s=!0,i=e},call:()=>(s=!0,i=Reflect.construct(o.fn,o.args,o.newTarget))};return(r.construct(o),s)?i:Reflect.construct(o.fn,o.args,o.newTarget)}),r.apply&&(s.apply=function(e,t,n){let i,s=!1,o={fn:e,this:t,args:n,newTarget:null,return:e=>{s=!0,i=e},call:()=>(s=!0,i=Reflect.apply(o.fn,o.this,o.args))},a=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){if(t[0].getFileName()&&!t[0].getFileName().startsWith(location.origin+c.$W.prefix))return{stack:e.stack}};try{r.apply(o)}catch(e){if(e instanceof Error)if(e.stack instanceof Object)e.stack=e.stack.stack,console.error("ERROR FROM SCRAMJET INTERNALS",e);else throw e;else throw e}return(Error.prepareStackTrace=a,s)?i:Reflect.apply(o.fn,o.this,o.args)}),s.getOwnPropertyDescriptor=i.getOwnPropertyDescriptorHandler,e[t]=new Proxy(n,s)}Trap(e,t){if(Array.isArray(e)){for(let r of e)this.Trap(r,t);return}let r=e.split("."),n=r.pop(),i=r.reduce((e,t)=>e?.[t],this.global);if(!i)return;let s=this.natives.call("Object.getOwnPropertyDescriptor",null,i,n);return this.descriptors.store[e]=s,this.RawTrap(i,n,t)}RawTrap(e,t,r){if(!e||!t||!Reflect.has(e,t))return;let n=this.natives.call("Object.getOwnPropertyDescriptor",null,e,t),i={this:null,get:function(){return n&&n.get.call(this.this)},set:function(e){n&&n.set.call(this.this,e)}};delete e[t];let s={};return r.get?s.get=function(){return i.this=this,r.get(i)}:n?.get&&(s.get=n.get),r.set?s.set=function(e){i.this=this,r.set(i,e)}:n?.set&&(s.set=n.set),r.enumerable?s.enumerable=r.enumerable:n?.enumerable&&(s.enumerable=n.enumerable),r.configurable?s.configurable=r.configurable:n?.configurable&&(s.configurable=n.configurable),Object.defineProperty(e,t,s),n}}},1077:function(e,t,r){function n(e,t){e.Trap("Element.prototype.attributes",{get(e){let t=e.get(),r=new Proxy(t,{get(e,n,i){let s=Reflect.get(e,n);return"length"===n?Object.keys(r).length:"getNamedItem"===n?e=>r[e]:"getNamedItemNS"===n?(e,t)=>r[`${e}:${t}`]:n in NamedNodeMap.prototype&&"function"==typeof s?new Proxy(s,{apply:(e,n,i)=>n===r?Reflect.apply(e,t,i):Reflect.apply(e,n,i)}):"string"!=typeof n&&"number"!=typeof n||isNaN(Number(n))?this.has(e,n)?s:void 0:t[Object.keys(r)[n]]},ownKeys(e){return Reflect.ownKeys(e).filter(t=>this.has(e,t))},has:(e,r)=>"symbol"==typeof r?Reflect.has(e,r):!(r.startsWith("scramjet-attr-")||t[r]?.name?.startsWith("scramjet-attr-"))&&Reflect.has(e,r)});return r}}),e.Trap(["Attr.prototype.value","Attr.prototype.nodeValue"],{get:e=>e.this?.ownerElement?e.this.ownerElement.getAttribute(e.this.name):e.get(),set:(e,t)=>e.this?.ownerElement?e.this.ownerElement.setAttribute(e.this.name,t):e.set(t)})}r.r(t),r.d(t,{default:()=>n})},7430:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(1472);function i(e,t){e.Proxy("Navigator.prototype.sendBeacon",{apply(t){t.args[0]=(0,n.Oy)(t.args[0],e.meta)}})}},9116:function(e,t,r){function n(e,t){e.serviceWorker.addEventListener("message",({data:t})=>{if("scramjet$type"in t&&"cookie"===t.scramjet$type){e.cookieStore.setCookies([t.cookie],new URL(t.url));let r={scramjet$token:t.scramjet$token,scramjet$type:"cookie"};e.serviceWorker.controller.postMessage(r)}}),e.Trap("Document.prototype.cookie",{get:()=>e.cookieStore.getCookies(e.url,!0),set(t,r){e.cookieStore.setCookies([r],e.url);let n=e.descriptors.get("ServiceWorkerContainer.prototype.controller",e.serviceWorker);n&&e.natives.call("ServiceWorker.prototype.postMessage",n,{scramjet$type:"cookie",cookie:r,url:e.url.href})}}),delete t.cookieStore}r.r(t),r.d(t,{default:()=>n})},6447:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(2614);function i(e){e.Proxy("CSSStyleDeclaration.prototype.setProperty",{apply(t){t.args[1]&&(t.args[1]=(0,n.s)(t.args[1],e.meta))}}),e.Proxy("CSSStyleDeclaration.prototype.getPropertyValue",{apply(e){let t=e.call();if(!t)return t;e.return((0,n.f)(t))}}),e.Trap("CSSStyleDeclaration.prototype.cssText",{set(t,r){t.set((0,n.s)(r,e.meta))},get:e=>(0,n.f)(e.get())}),e.Proxy("CSSStyleSheet.prototype.insertRule",{apply(t){t.args[0]=(0,n.s)(t.args[0],e.meta)}}),e.Proxy("CSSStyleSheet.prototype.replace",{apply(t){t.args[0]=(0,n.s)(t.args[0],e.meta)}}),e.Proxy("CSSStyleSheet.prototype.replaceSync",{apply(t){t.args[0]=(0,n.s)(t.args[0],e.meta)}}),e.Trap("CSSRule.prototype.cssText",{set(t,r){t.set((0,n.s)(r,e.meta))},get:e=>(0,n.f)(e.get())}),e.Proxy("CSSStyleValue.parse",{apply(t){t.args[1]&&(t.args[1]=(0,n.s)(t.args[1],e.meta))}}),e.Trap("HTMLElement.prototype.style",{get(t){let r=t.get();return new Proxy(r,{get(e,t){let i=Reflect.get(e,t);return"function"==typeof i?new Proxy(i,{apply:(e,t,n)=>Reflect.apply(e,r,n)}):t in CSSStyleDeclaration.prototype||!i?i:(0,n.f)(i)},set:(t,r,i)=>"cssText"==r||""==i||"string"!=typeof i?Reflect.set(t,r,i):Reflect.set(t,r,(0,n.s)(i,e.meta))})},set(e,t){e.set(t)}})}},5351:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(884);function i(e,t){e.Proxy(["Document.prototype.querySelector","Document.prototype.querySelectorAll"],{apply(e){e.args[0]=e.args[0].replace(/((?:^|\s)\b\w+\[(?:src|href|data-href))[\^]?(=['"]?(?:https?[:])?\/\/)/,"$1*$2")}}),e.Proxy("Document.prototype.write",{apply(t){if(t.args[0])try{t.args[0]=(0,n.Qs)(t.args[0],e.cookieStore,e.meta,!1)}catch{}}}),e.Proxy("Document.prototype.writeln",{apply(t){if(t.args[0])try{t.args[0]=(0,n.Qs)(t.args[0],e.cookieStore,e.meta,!1)}catch{}}}),e.Proxy("Document.prototype.parseHTMLUnsafe",{apply(t){if(t.args[0])try{t.args[0]=(0,n.Qs)(t.args[0],e.cookieStore,e.meta,!1)}catch{}}})}},7828:function(e,t,r){r.r(t),r.d(t,{default:()=>d});var n=r(2393),i=r(2614),s=r(884),o=r(1478),a=r(1472),l=r(2794),c=r(3255);let u=new TextEncoder;function d(e,t){let r={nonce:[t.HTMLElement],integrity:[t.HTMLScriptElement,t.HTMLLinkElement],csp:[t.HTMLIFrameElement],credentialless:[t.HTMLIFrameElement],src:[t.HTMLImageElement,t.HTMLMediaElement,t.HTMLIFrameElement,t.HTMLFrameElement,t.HTMLEmbedElement,t.HTMLScriptElement,t.HTMLSourceElement],href:[t.HTMLAnchorElement,t.HTMLLinkElement],data:[t.HTMLObjectElement],action:[t.HTMLFormElement],formaction:[t.HTMLButtonElement,t.HTMLInputElement],srcdoc:[t.HTMLIFrameElement],poster:[t.HTMLVideoElement],imagesrcset:[t.HTMLLinkElement]},d=[t.HTMLAnchorElement.prototype,t.HTMLAreaElement.prototype],h=[e.natives.call("Object.getOwnPropertyDescriptor",null,t.HTMLAnchorElement.prototype,"href"),e.natives.call("Object.getOwnPropertyDescriptor",null,t.HTMLAreaElement.prototype,"href")];for(let t of Object.keys(r))for(let n of r[t]){let r=e.natives.call("Object.getOwnPropertyDescriptor",null,n.prototype,t);Object.defineProperty(n.prototype,t,{get(){return["src","data","href","action","formaction"].includes(t)?(0,a.v2)(r.get.call(this)):r.get.call(this)},set(e){return this.setAttribute(t,e)}})}for(let t of["protocol","hash","host","hostname","origin","pathname","port","search"])for(let r in d){let n=d[r],i=h[r];e.RawTrap(n,t,{get(e){let r=i.get.call(e.this);return r?new URL((0,a.v2)(r))[t]:r}})}e.Trap("Node.prototype.baseURI",{get(t){let r=t.this,n=r.ownerDocument?.querySelector("base");return(r instanceof Document&&(n=r.querySelector("base")),n)?new URL(n.href,e.url.origin).href:e.url.origin},set:(e,t)=>!1}),e.Proxy("Element.prototype.getAttribute",{apply(t){let[r]=t.args;if(r.startsWith("scramjet-attr"))return t.return(null);if(e.natives.call("Element.prototype.hasAttribute",t.this,`scramjet-attr-${r}`)){let e=t.fn.call(t.this,`scramjet-attr-${r}`);return null===e?t.return(""):t.return(e)}}}),e.Proxy("Element.prototype.getAttributeNames",{apply(e){let t=e.call().filter(e=>!e.startsWith("scramjet-attr"));e.return(t)}}),e.Proxy("Element.prototype.getAttributeNode",{apply(e){if(e.args[0].startsWith("scramjet-attr"))return e.return(null)}}),e.Proxy("Element.prototype.hasAttribute",{apply(e){if(e.args[0].startsWith("scramjet-attr"))return e.return(!1)}}),e.Proxy("Element.prototype.setAttribute",{apply(t){let[r,i]=t.args,s=n.V.find(e=>{let n=e[r.toLowerCase()];return!!n&&("*"===n||"function"!=typeof n&&n.includes(t.this.tagName.toLowerCase()))});if(s){let n=s.fn(i,e.meta,e.cookieStore);if(null==n){e.natives.call("Element.prototype.removeAttribute",t.this,r),t.return(void 0);return}t.args[1]=n,t.fn.call(t.this,`scramjet-attr-${t.args[0]}`,i)}}}),e.Proxy("Element.prototype.setAttributeNode",{apply(e){}}),e.Proxy("Element.prototype.setAttributeNS",{apply(t){let[r,i,s]=t.args,o=n.V.find(e=>{let r=e[i.toLowerCase()];return!!r&&("*"===r||"function"!=typeof r&&r.includes(t.this.tagName.toLowerCase()))});o&&(t.args[2]=o.fn(s,e.meta,e.cookieStore),e.natives.call("Element.prototype.setAttribute",t.this,`scramjet-attr-${t.args[1]}`,s))}}),e.Trap("SVGAnimatedString.prototype.baseVal",{get(e){let t=e.get();return t?(0,a.v2)(t):t},set(t,r){t.set((0,a.Oy)(r,e.meta))}}),e.Trap("SVGAnimatedString.prototype.animVal",{get(e){let t=e.get();return t?(0,a.v2)(t):t}}),e.Proxy("Element.prototype.removeAttribute",{apply(t){if(t.args[0].startsWith("scramjet-attr"))return t.return(void 0);e.natives.call("Element.prototype.hasAttribute",t.this,t.args[0])&&t.fn.call(t.this,`scramjet-attr-${t.args[0]}`)}}),e.Proxy("Element.prototype.toggleAttribute",{apply(t){if(t.args[0].startsWith("scramjet-attr"))return t.return(!1);e.natives.call("Element.prototype.hasAttribute",t.this,t.args[0])&&t.fn.call(t.this,`scramjet-attr-${t.args[0]}`)}}),e.Trap("Element.prototype.innerHTML",{set(r,n){let a;if(r.this instanceof t.HTMLScriptElement)a=(0,o.o)(n,"(anonymous script element)",e.meta),e.natives.call("Element.prototype.setAttribute",r.this,"scramjet-attr-script-source-src",btoa(Array.from(u.encode(a),e=>String.fromCodePoint(e)).join("")));else if(r.this instanceof t.HTMLStyleElement)a=(0,i.s)(n,e.meta);else try{a=(0,s.Qs)(n,e.cookieStore,e.meta)}catch{a=n}r.set(a)},get(r){if(r.this instanceof t.HTMLScriptElement){let t=e.natives.call("Element.prototype.getAttribute",r.this,"scramjet-attr-script-source-src");return t?atob(t):r.get()}return r.this instanceof t.HTMLStyleElement?r.get():(0,s.nK)(r.get())}}),e.Trap("Element.prototype.outerHTML",{set(t,r){t.set((0,s.Qs)(r,e.cookieStore,e.meta))},get:e=>(0,s.nK)(e.get())}),e.Proxy("Element.prototype.setHTMLUnsafe",{apply(t){try{t.args[0]=(0,s.Qs)(t.args[0],e.cookieStore,e.meta,!1)}catch{}}}),e.Proxy("Element.prototype.getHTML",{apply(e){e.return((0,s.nK)(e.call()))}}),e.Proxy("Element.prototype.insertAdjacentHTML",{apply(t){if(t.args[1])try{t.args[1]=(0,s.Qs)(t.args[1],e.cookieStore,e.meta,!1)}catch{}}}),e.Proxy("Audio",{construct(t){t.args[0]&&(t.args[0]=(0,a.Oy)(t.args[0],e.meta))}}),e.Proxy("Text.prototype.appendData",{apply(t){t.this.parentElement?.tagName==="STYLE"&&(t.args[0]=(0,i.s)(t.args[0],e.meta))}}),e.Proxy("Text.prototype.insertData",{apply(t){t.this.parentElement?.tagName==="STYLE"&&(t.args[1]=(0,i.s)(t.args[1],e.meta))}}),e.Proxy("Text.prototype.replaceData",{apply(t){t.this.parentElement?.tagName==="STYLE"&&(t.args[2]=(0,i.s)(t.args[2],e.meta))}}),e.Trap("Text.prototype.wholeText",{get:e=>e.this.parentElement?.tagName==="STYLE"?(0,i.f)(e.get()):e.get(),set:(t,r)=>t.this.parentElement?.tagName==="STYLE"?t.set((0,i.s)(r,e.meta)):t.set(r)}),e.Trap(["HTMLIFrameElement.prototype.contentWindow","HTMLFrameElement.prototype.contentWindow","HTMLObjectElement.prototype.contentWindow","HTMLEmbedElement.prototype.contentWindow"],{get(e){let t=e.get();return t&&(l.pX in t||new c.ScramjetClient(t).hook()),t}}),e.Trap(["HTMLIFrameElement.prototype.contentDocument","HTMLFrameElement.prototype.contentDocument","HTMLObjectElement.prototype.contentDocument","HTMLEmbedElement.prototype.contentDocument"],{get(t){let r=e.descriptors.get(`${t.this.constructor.name}.prototype.contentWindow`,t.this);return r?(l.pX in r||new c.ScramjetClient(r).hook(),r.document):r}}),e.Proxy(["HTMLIFrameElement.prototype.getSVGDocument","HTMLObjectElement.prototype.getSVGDocument","HTMLEmbedElement.prototype.getSVGDocument"],{apply(e){if(e.call())return e.return(e.this.contentDocument)}}),e.Proxy("DOMParser.prototype.parseFromString",{apply(t){if("text/html"===t.args[1])try{t.args[0]=(0,s.Qs)(t.args[0],e.cookieStore,e.meta,!1)}catch{}}})}},5426:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(2614);function i(e,t){e.Proxy("FontFace",{construct(t){t.args[1]=(0,n.s)(t.args[1],e.meta)}})}},5465:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(884);function i(e,t){e.Proxy("Range.prototype.createContextualFragment",{apply(t){t.args[0]=(0,n.Qs)(t.args[0],e.cookieStore,e.meta)}})}},9804:function(e,t,r){r.r(t),r.d(t,{default:()=>o});var n=r(1472),i=r(1862),s=r(2794);function o(e,t){e.Proxy(["History.prototype.pushState","History.prototype.replaceState"],{apply(t){(t.args[2]||""===t.args[2])&&(t.args[2]=(0,n.Oy)(t.args[2],e.meta)),t.call();let{constructor:{constructor:r}}=t.this,o=r("return globalThis")(),a=o[s.pX];if(o.name===e.meta.topFrameName){let t=new i.UrlChangeEvent(a.url.href);e.frame?.dispatchEvent(t)}}})}},7758:function(e,t,r){r.r(t),r.d(t,{default:()=>o});var n=r(3255),i=r(2794),s=r(1472);function o(e){e.Proxy("window.open",{apply(t){t.args[0]&&(t.args[0]=(0,s.Oy)(t.args[0],e.meta)),("_top"===t.args[1]||"_unfencedTop"===t.args[1])&&(t.args[1]=e.meta.topFrameName),"_parent"===t.args[1]&&(t.args[1]=e.meta.parentFrameName);let r=t.call();if(!r)return t.return(r);if(i.pX in r)return t.return(r[i.pX].global);{let e=new n.ScramjetClient(r);return e.hook(),t.return(e.global)}}}),e.Trap("window.frameElement",{get(e){let t=e.get();return t?t.ownerDocument.defaultView[i.pX]?t:null:t}})}},6012:function(e,t,r){function n(e,t){e.Trap("origin",{get:()=>e.url.origin,set:()=>!1}),e.Trap("Document.prototype.URL",{get:()=>e.url.href,set:()=>!1}),e.Trap("Document.prototype.documentURI",{get:()=>e.url.href,set:()=>!1}),e.Trap("Document.prototype.domain",{get:()=>e.url.hostname,set:()=>!1})}r.r(t),r.d(t,{default:()=>n})},6286:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(1472);function i(e,t){e.Trap("PerformanceEntry.prototype.name",{get:e=>(0,n.v2)(e.get())})}},1974:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(1472);function i(e,t){e.Proxy("Navigator.prototype.registerProtocolHandler",{apply(t){t.args[1]=(0,n.Oy)(t.args[1],e.meta)}}),e.Proxy("Navigator.prototype.unregisterProtocolHandler",{apply(t){t.args[1]=(0,n.Oy)(t.args[1],e.meta)}})}},9201:function(e,t,r){r.r(t),r.d(t,{default:()=>l,disabled:()=>a,enabled:()=>o,order:()=>s});var n=r(37),i=r(1472);let s=2,o=e=>(0,n.U5)("serviceworkers",e.url);function a(e,t){Reflect.deleteProperty(Navigator.prototype,"serviceWorker")}function l(e,t){let r=new WeakMap;e.Proxy("EventTarget.prototype.addEventListener",{apply(e){r.get(e.this)&&e.return(void 0)}}),e.Proxy("EventTarget.prototype.removeEventListener",{apply(e){r.get(e.this)&&e.return(void 0)}}),e.Proxy("ServiceWorkerContainer.prototype.getRegistration",{apply(e){e.return(new Promise(e=>e(registration)))}}),e.Proxy("ServiceWorkerContainer.prototype.getRegistrations",{apply(e){e.return(new Promise(e=>e([registration])))}}),e.Trap("ServiceWorkerContainer.prototype.ready",{get:e=>new Promise(e=>e(registration))}),e.Trap("ServiceWorkerContainer.prototype.controller",{get:e=>registration?.active}),e.Proxy("ServiceWorkerContainer.prototype.register",{apply(t){let n=new EventTarget;Object.setPrototypeOf(n,self.ServiceWorkerRegistration.prototype),n.constructor=t.fn;let s=(0,i.Oy)(t.args[0],e.meta)+"?dest=serviceworker";t.args[1]&&"module"===t.args[1].type&&(s+="&type=module");let o=e.natives.construct("SharedWorker",s).port,a={scope:t.args[0],active:o},l=e.descriptors.get("ServiceWorkerContainer.prototype.controller",e.serviceWorker);e.natives.call("ServiceWorker.prototype.postMessage",l,{scramjet$type:"registerServiceWorker",port:o,origin:e.url.origin},[o]),r.set(n,a),t.return(new Promise(e=>e(n)))}})}},5289:function(e,t,r){function n(e,t){let r={get(t,r){switch(r){case"getItem":return r=>t.getItem(e.url.host+"@"+r);case"setItem":return(r,n)=>t.setItem(e.url.host+"@"+r,n);case"removeItem":return r=>t.removeItem(e.url.host+"@"+r);case"clear":return()=>{for(let r in Object.keys(t))r.startsWith(e.url.host)&&t.removeItem(r)};case"key":return r=>{let n=Object.keys(t).filter(t=>t.startsWith(e.url.host));return t.getItem(n[r])};case"length":return Object.keys(t).filter(t=>t.startsWith(e.url.host)).length;default:if(r in Object.prototype||"symbol"==typeof r)return Reflect.get(t,r);return t.getItem(e.url.host+"@"+r)}},set:(t,r,n)=>(t.setItem(e.url.host+"@"+r,n),!0),ownKeys:t=>Reflect.ownKeys(t).filter(t=>"string"==typeof t&&t.startsWith(e.url.host)).map(t=>"string"==typeof t?t.substring(e.url.host.length+1):t),getOwnPropertyDescriptor:(t,r)=>({value:t.getItem(e.url.host+"@"+r),enumerable:!0,configurable:!0,writable:!0}),defineProperty:(t,r,n)=>(t.setItem(e.url.host+"@"+r,n.value),!0)};t.localStorage;let n=new Proxy(t.localStorage,r),i=new Proxy(t.sessionStorage,r);delete t.localStorage,delete t.sessionStorage,t.localStorage=n,t.sessionStorage=i}r.r(t),r.d(t,{default:()=>n})},1323:function(e,t,r){r.r(t),r.d(t,{isdedicated:()=>h,isemulatedsw:()=>f,isshared:()=>p,issw:()=>d,iswindow:()=>c,isworker:()=>u,loadAndHook:()=>g});var n=r(37),i=r(2794),s=r(3255),o=r(1862),a=r(8409),l=r(8665).A;let c="window"in globalThis&&window instanceof Window,u="WorkerGlobalScope"in globalThis,d="ServiceWorkerGlobalScope"in globalThis,h="DedicatedWorkerGlobalScope"in globalThis,p="SharedWorkerGlobalScope"in globalThis,f="location"in globalThis&&"serviceworker"===new URL(globalThis.location.href).searchParams.get("dest");function g(e){if((0,n.Nk)(e),l.log("initializing scramjet client"),!(i.pX in globalThis)){(0,n.Ec)();let e=new s.ScramjetClient(globalThis),t=globalThis.frameElement;t&&!t.name&&(t.name=`${Array(8).fill(0).map(()=>Math.floor(36*Math.random()).toString(36)).join("")}`),globalThis.COOKIE&&e.loadcookies(globalThis.COOKIE),e.hook(),f&&new a.ScramjetServiceWorkerRuntime(e).hook();let r=new o.ScramjetContextEvent(e.global.window,e);e.frame?.dispatchEvent(r);let i=new o.UrlChangeEvent(e.url.href);e.isSubframe||e.frame?.dispatchEvent(i)}Reflect.deleteProperty(globalThis,"WASM"),Reflect.deleteProperty(globalThis,"COOKIE")}},1862:function(e,t,r){r.r(t),r.d(t,{NavigateEvent:()=>i,ScramjetContextEvent:()=>o,ScramjetGlobalDownloadEvent:()=>n,UrlChangeEvent:()=>s});class n extends Event{download;type="download";constructor(e){super("download"),this.download=e}}class i extends Event{url;type="navigate";constructor(e){super("navigate"),this.url=e}}class s extends Event{url;type="urlchange";constructor(e){super("urlchange"),this.url=e}}class o extends Event{window;client;type="contextInit";constructor(e,t){super("contextInit"),this.window=e,this.client=t}}},94:function(e,t,r){function n(e,t){return Reflect.getOwnPropertyDescriptor(e,t)}r.r(t),r.d(t,{getOwnPropertyDescriptorHandler:()=>n})},3255:function(e,t,r){r.r(t),r.d(t,{NavigateEvent:()=>s.NavigateEvent,ScramjetClient:()=>n.ScramjetClient,ScramjetContextEvent:()=>s.ScramjetContextEvent,ScramjetGlobalDownloadEvent:()=>s.ScramjetGlobalDownloadEvent,ScramjetServiceWorkerRuntime:()=>l.ScramjetServiceWorkerRuntime,UrlChangeEvent:()=>s.UrlChangeEvent,createLocationProxy:()=>a.createLocationProxy,getOwnPropertyDescriptorHandler:()=>o.getOwnPropertyDescriptorHandler,isdedicated:()=>i.isdedicated,isemulatedsw:()=>i.isemulatedsw,isshared:()=>i.isshared,issw:()=>i.issw,iswindow:()=>i.iswindow,isworker:()=>i.isworker,loadAndHook:()=>i.loadAndHook});var n=r(336),i=r(1323),s=r(1862),o=r(94),a=r(3696),l=r(8409);r(3255)},3696:function(e,t,r){r.r(t),r.d(t,{createLocationProxy:()=>o});var n=r(1862),i=r(1472),s=r(1323);function o(e,t){let r=s.iswindow?t.Location:t.WorkerLocation,o={};Object.setPrototypeOf(o,r.prototype),o.constructor=r;let a=s.iswindow?t.location:r.prototype;for(let r of["protocol","hash","host","hostname","href","origin","pathname","port","search"]){let i=e.natives.call("Object.getOwnPropertyDescriptor",null,a,r);if(!i)continue;let s={configurable:!0,enumerable:!0};i.get&&(s.get=new Proxy(i.get,{apply:()=>e.url[r]})),i.set&&(s.set=new Proxy(i.set,{apply(i,s,o){if("href"===r){e.url=o[0];return}if("hash"===r){t.location.hash=o[0];let r=new n.UrlChangeEvent(e.url.href);e.isSubframe||e.frame?.dispatchEvent(r);return}let a=new URL(e.url.href);a[r]=o[0],e.url=a}})),Object.defineProperty(o,r,s)}return o.toString=new Proxy(t.location.toString,{apply:()=>e.url.href}),t.location.valueOf&&(o.valueOf=new Proxy(t.location.valueOf,{apply:()=>e.url.href})),t.location.assign&&(o.assign=new Proxy(t.location.assign,{apply(r,s,o){o[0]=(0,i.Oy)(o[0],e.meta),Reflect.apply(r,t.location,o);let a=new n.UrlChangeEvent(e.url.href);e.isSubframe||e.frame?.dispatchEvent(a)}})),t.location.reload&&(o.reload=new Proxy(t.location.reload,{apply(e,r,n){Reflect.apply(e,t.location,n)}})),t.location.replace&&(o.replace=new Proxy(t.location.replace,{apply(r,s,o){o[0]=(0,i.Oy)(o[0],e.meta),Reflect.apply(r,t.location,o);let a=new n.UrlChangeEvent(e.url.href);e.isSubframe||e.frame?.dispatchEvent(a)}})),o}},8382:function(e,t,r){function n(e){e.Proxy("console.clear",{apply(e){e.return(void 0)}});let t=console.log;e.Trap("console.log",{set(e,t){},get:e=>t})}r.r(t),r.d(t,{default:()=>n})},4634:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(1472);function i(e){e.Proxy("URL.createObjectURL",{apply(t){let r=t.call();r.startsWith("blob:")?t.return((0,n.IP)(r,e.meta)):t.return(r)}}),e.Proxy("URL.revokeObjectURL",{apply(e){e.args[0]=(0,n.$n)(e.args[0])}})}},5026:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(1472);function i(e,t){e.Proxy("CacheStorage.prototype.open",{apply(t){t.args[0]=`${e.url.origin}@${t.args[0]}`}}),e.Proxy("CacheStorage.prototype.has",{apply(t){t.args[0]=`${e.url.origin}@${t.args[0]}`}}),e.Proxy("CacheStorage.prototype.match",{apply(t){("string"==typeof t.args[0]||t.args[0]instanceof URL)&&(t.args[0]=(0,n.Oy)(t.args[0],e.meta))}}),e.Proxy("CacheStorage.prototype.delete",{apply(t){t.args[0]=`${e.url.origin}@${t.args[0]}`}}),e.Proxy("Cache.prototype.add",{apply(t){("string"==typeof t.args[0]||t.args[0]instanceof URL)&&(t.args[0]=(0,n.Oy)(t.args[0],e.meta))}}),e.Proxy("Cache.prototype.addAll",{apply(t){for(let r=0;r<t.args[0].length;r++)("string"==typeof t.args[0][r]||t.args[0][r]instanceof URL)&&(t.args[0][r]=(0,n.Oy)(t.args[0][r],e.meta))}}),e.Proxy("Cache.prototype.put",{apply(t){("string"==typeof t.args[0]||t.args[0]instanceof URL)&&(t.args[0]=(0,n.Oy)(t.args[0],e.meta))}}),e.Proxy("Cache.prototype.match",{apply(t){("string"==typeof t.args[0]||t.args[0]instanceof URL)&&(t.args[0]=(0,n.Oy)(t.args[0],e.meta))}}),e.Proxy("Cache.prototype.matchAll",{apply(t){(t.args[0]&&"string"==typeof t.args[0]||t.args[0]&&t.args[0]instanceof URL)&&(t.args[0]=(0,n.Oy)(t.args[0],e.meta))}}),e.Proxy("Cache.prototype.keys",{apply(t){(t.args[0]&&"string"==typeof t.args[0]||t.args[0]&&t.args[0]instanceof URL)&&(t.args[0]=(0,n.Oy)(t.args[0],e.meta))}}),e.Proxy("Cache.prototype.delete",{apply(t){("string"==typeof t.args[0]||t.args[0]instanceof URL)&&(t.args[0]=(0,n.Oy)(t.args[0],e.meta))}})}},6627:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(1323);function i(e,t){let r=e=>{let r=e.split("."),n=r.pop(),i=r.reduce((e,t)=>e?.[t],t);i&&n&&n in i&&delete i[n]};r("BarcodeDetector"),r("FaceDetector"),r("TextDetector"),n.iswindow&&r("ServiceWorkerRegistration.prototype.sync"),n.isemulatedsw&&(r("SyncManager"),r("SyncEvent")),r("TrustedHTML"),r("TrustedScript"),r("TrustedScriptURL"),r("TrustedTypePolicy"),r("TrustedTypePolicyFactory"),t.__defineGetter__("trustedTypes",()=>void 0),r("Navigator.prototype.joinAdInterestGroup"),n.iswindow&&(r("MediaDevices.prototype.setCaptureHandleConfig"),r("Navigator.prototype.bluetooth"),r("Bluetooth"),r("BluetoothDevice"),r("BluetoothRemoteGATTServer"),r("BluetoothRemoteGATTCharacteristic"),r("BluetoothRemoteGATTDescriptor"),r("BluetoothUUID"),r("Navigator.prototype.contacts"),r("ContactAddress"),r("ContactManager"),r("IdleDetector"),r("Navigator.prototype.presentation"),r("Presentation"),r("PresentationConnection"),r("PresentationReceiver"),r("PresentationRequest"),r("PresentationAvailability"),r("PresentationConnectionAvailableEvent"),r("PresentationConnectionCloseEvent"),r("PresentationConnectionList"),r("WindowControlsOverlay"),r("WindowControlsOverlayGeometryChangeEvent"),r("Navigator.prototype.windowControlsOverlay"),r("Navigator.prototype.hid"),r("HID"),r("HIDDevice"),r("HIDConnectionEvent"),r("HIDInputReportEvent"),r("navigation"),r("NavigateEvent"),r("NavigationActivation"),r("NavigationCurrentEntryChangeEvent"),r("NavigationDestination"),r("NavigationHistoryEntry"),r("NavigationTransition"))}},582:function(e,t,r){r.r(t),r.d(t,{argdbg:()=>s,default:()=>o,enabled:()=>i});var n=r(37);let i=e=>(0,n.U5)("captureErrors",e.url);function s(e,t=[]){switch(typeof e){case"string":break;case"object":if(e&&e[Symbol.iterator]&&"function"==typeof e[Symbol.iterator])for(let r in e){let n=Object.getOwnPropertyDescriptor(e,r);if(n&&n.get)continue;let i=e[r];t.includes(i)||(t.push(i),s(i,t))}}}function o(e,t){t.$scramerr=function(e){console.warn("CAUGHT ERROR",e)},t.$scramdbg=function(e,t){return e&&"object"==typeof e&&e.length>0&&s(e),s(t),t},e.Proxy("Promise.prototype.catch",{apply(e){e.args[0]&&(e.args[0]=new Proxy(e.args[0],{apply(e,t,r){Reflect.apply(e,t,r)}}))}})}},6143:function(e,t,r){r.r(t),r.d(t,{default:()=>o,enabled:()=>s});var n=r(37),i=r(1472);let s=e=>(0,n.U5)("cleanErrors",e.url);function o(e,t){let r=(e,t)=>{let r=e.stack;for(let e=0;e<t.length;e++){let s=t[e].getFileName();try{if(s.endsWith(n.$W.files.all)){let e=r.split("\n"),t=e.find(e=>e.includes(s));e.splice(t,1),r=e.join("\n");continue}}catch{}try{r=r.replaceAll(s,(0,i.v2)(s))}catch{}}return r};e.Trap("Error.prepareStackTrace",{get:e=>r,set(e){}})}},591:function(e,t,r){r.r(t),r.d(t,{default:()=>s,indirectEval:()=>o});var n=r(37),i=r(1478);function s(e,t){Object.defineProperty(t,n.$W.globals.rewritefn,{value:function(t){return"string"!=typeof t?t:(0,i.o)(t,"(direct eval proxy)",e.meta)},writable:!1,configurable:!1})}function o(e,t){let r;return"string"!=typeof t?t:("accounts.google.com"===this.url.hostname?(console.log("USING STRICT EVAL - BOTGUARD"),r=Function(`
			"use strict";
			return eval;
		`)):r=this.global.eval,r((0,i.o)(t,"(indirect eval proxy)",this.meta)))}},3481:function(e,t,r){r.r(t),r.d(t,{default:()=>a});var n=r(1323),i=r(1472),s=r(94);let o=Symbol.for("scramjet original onevent function");function a(e,t){let r={message:{_init(){return"object"!=typeof this.data||!("$scramjet$type"in this.data)},ports(){return this.ports},source(){return null===this.source?null:this.source},origin(){return"object"==typeof this.data&&"$scramjet$origin"in this.data?this.data.$scramjet$origin:e.url.origin},data(){return"object"==typeof this.data&&"$scramjet$data"in this.data?this.data.$scramjet$data:this.data}},hashchange:{oldURL(){return(0,i.v2)(this.oldURL)},newURL(){return(0,i.v2)(this.newURL)}},storage:{_init(){return this.key.startsWith(e.url.host+"@")},key(){return this.key.substring(this.key.indexOf("@")+1)},url(){return(0,i.v2)(this.url)}}};function a(e){return new Proxy(e,{apply(e,n,i){let o=i[0];if(o.isTrusted){let e=o.type;if(e in r){let t=r[e];if(t._init&&!1===t._init.call(o))return;i[0]=new Proxy(o,{get(e,r,n){let i=Reflect.get(e,r);return r in t?t[r].call(e):"function"==typeof i?new Proxy(i,{apply:(e,t,r)=>t===n?Reflect.apply(e,o,r):Reflect.apply(e,t,r)}):i},getOwnPropertyDescriptor:s.getOwnPropertyDescriptorHandler})}}return t.event||Object.defineProperty(t,"event",{get:()=>i[0],configurable:!0}),Reflect.apply(e,n,i)},getOwnPropertyDescriptor:s.getOwnPropertyDescriptorHandler})}e.Proxy("EventTarget.prototype.addEventListener",{apply(t){if("function"!=typeof t.args[1])return;let r=t.args[1],n=a(r);t.args[1]=n;let i=e.eventcallbacks.get(t.this);(i||=[]).push({event:t.args[0],originalCallback:r,proxiedCallback:n}),e.eventcallbacks.set(t.this,i)}}),e.Proxy("EventTarget.prototype.removeEventListener",{apply(t){if("function"!=typeof t.args[1])return;let r=e.eventcallbacks.get(t.this);if(!r)return;let n=r.findIndex(e=>e.event===t.args[0]&&e.originalCallback===t.args[1]);if(-1===n)return;let i=r.splice(n,1);e.eventcallbacks.set(t.this,r),t.args[1]=i[0].proxiedCallback}});let l=[t.self,t.MessagePort.prototype];for(let i of(n.iswindow&&l.push(t.HTMLElement.prototype),t.Worker&&l.push(t.Worker.prototype),l))for(let t of Reflect.ownKeys(i))if("string"==typeof t&&t.startsWith("on")&&r[t.slice(2)]){let r=e.natives.call("Object.getOwnPropertyDescriptor",null,i,t);if(!r.get||!r.set||!r.configurable)continue;e.RawTrap(i,t,{get(e){return this[o]?this[o]:e.get()},set(e,t){if(this[o]=t,"function"!=typeof t)return e.set(t);e.set(a(t))}})}}},249:function(e,t,r){r.r(t),r.d(t,{default:()=>s});var n=r(1478);function i(e,t){let r=e.call().toString(),i=(0,n.o)(`return ${r}`,"(function proxy)",t.meta);e.return(e.fn(i)())}function s(e,t){let r={apply(t){i(t,e)},construct(t){i(t,e)}};e.Proxy("Function",r);let n=e.natives.call("eval",null,"(function () {})").constructor,s=e.natives.call("eval",null,"(async function () {})").constructor,o=e.natives.call("eval",null,"(function* () {})").constructor,a=e.natives.call("eval",null,"(async function* () {})").constructor;e.RawProxy(n.prototype,"constructor",r),e.RawProxy(s.prototype,"constructor",r),e.RawProxy(o.prototype,"constructor",r),e.RawProxy(a.prototype,"constructor",r)}},2468:function(e,t,r){r.r(t),r.d(t,{default:()=>s});var n=r(37),i=r(1472);function s(e,t){let r=e.natives.store.Function;Object.defineProperty(t,n.$W.globals.importfn,{value:function(t,n){let s=new URL(n,t).href;return n.includes(":")||n.startsWith("/")||n.startsWith(".")||n.startsWith("..")?r(`return import("${(0,i.Oy)(s,e.meta)}?type=module")`)():r(`return import("${n}")`)()},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(t,n.$W.globals.metafn,{value:function(e,t){return e.url=t,e.resolve=function(e){return new URL(e,t).href},e},writable:!1,configurable:!1,enumerable:!1})}},4338:function(e,t,r){function n(e){e.Proxy("IDBFactory.prototype.open",{apply(t){t.args[0]=`${e.url.origin}@${t.args[0]}`}}),e.Trap("IDBDatabase.prototype.name",{get(e){let t=e.get();return t.substring(t.indexOf("@")+1)}})}r.r(t),r.d(t,{default:()=>n})},6593:function(e,t,r){function n(e){e.Proxy("StorageManager.prototype.getDirectory",{apply(t){let r=t.call();t.return((async()=>{let t=await r,n=await t.getDirectoryHandle(`${e.url.origin.replace(/\/|\s|\./g,"-")}`,{create:!0});return Object.defineProperty(n,"name",{value:"",writable:!1}),n})())}})}r.r(t),r.d(t,{default:()=>n})},1320:function(e,t,r){r.r(t),r.d(t,{default:()=>o});var n=r(1323),i=r(2794),s=r(1914);function o(e){n.iswindow&&e.Proxy("window.postMessage",{apply(e){let{constructor:{constructor:t}}="object"==typeof e.args[0]&&null!==e.args[0]?e.args[0]:"object"==typeof e.args[2]&&null!==e.args[2]?e.args[2]:e.this&&s.POLLUTANT in e.this&&"object"==typeof e.this[s.POLLUTANT]&&null!==e.this[s.POLLUTANT]?e.this[s.POLLUTANT]:{},r=t("return globalThis")()[i.pX],n=t("...args","this(...args)");e.args[0]={$scramjet$messagetype:"window",$scramjet$origin:r.url.origin,$scramjet$data:e.args[0]},"string"==typeof e.args[1]&&(e.args[1]="*"),"object"==typeof e.args[1]&&(e.args[1].targetOrigin="*"),e.return(n.call(e.fn,...e.args))}});let t=["MessagePort.prototype.postMessage"];self.Worker&&t.push("Worker.prototype.postMessage"),n.iswindow||t.push("self.postMessage"),e.Proxy(t,{apply(e){e.args[0]={$scramjet$messagetype:"worker",$scramjet$data:e.args[0]}}})}},1914:function(e,t,r){r.r(t),r.d(t,{POLLUTANT:()=>i,default:()=>s});var n=r(37);let i=Symbol.for("scramjet realm pollutant");function s(e,t){Object.defineProperty(t.Object.prototype,n.$W.globals.setrealmfn,{value(e){return Object.defineProperty(this,i,{value:e,writable:!1,configurable:!0,enumerable:!1}),this},writable:!0,configurable:!0,enumerable:!1})}},9701:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(1472);function i(e){e.Proxy("EventSource",{construct(t){t.args[0]=(0,n.Oy)(t.args[0],e.meta)}}),e.Trap("EventSource.prototype.url",{get(e){(0,n.v2)(e.get())}})}},6972:function(e,t,r){r.r(t),r.d(t,{default:()=>s});var n=r(1323),i=r(1472);function s(e){e.Proxy("fetch",{apply(t){("string"==typeof t.args[0]||t.args[0]instanceof URL)&&(t.args[0]=(0,i.Oy)(t.args[0],e.meta),n.isemulatedsw&&(t.args[0]+="?from=swruntime"))}}),e.Proxy("Request",{construct(t){("string"==typeof t.args[0]||t.args[0]instanceof URL)&&(t.args[0]=(0,i.Oy)(t.args[0],e.meta),n.isemulatedsw&&(t.args[0]+="?from=swruntime"))}}),e.Trap("Response.prototype.url",{get:e=>(0,i.v2)(e.get())}),e.Trap("Request.prototype.url",{get:e=>(0,i.v2)(e.get())})}},9931:function(e,t,r){function n(e,t){let r=new WeakMap,n=new WeakMap;e.Proxy("WebSocket",{construct(n){let i=new EventTarget;Object.setPrototypeOf(i,n.fn.prototype),i.constructor=n.fn;let s=e.bare.createWebSocket(n.args[0],n.args[1],null,{"User-Agent":t.navigator.userAgent,Origin:e.url.origin}),o={extensions:"",protocol:"",url:n.args[0],binaryType:"blob",barews:s,onclose:null,onerror:null,onmessage:null,onopen:null};function a(e){o["on"+e.type]?.(new Proxy(e,{get:(e,t)=>"isTrusted"===t||Reflect.get(e,t)})),i.dispatchEvent(e)}s.addEventListener("open",()=>{a(new Event("open"))}),s.addEventListener("close",e=>{a(new CloseEvent("close",e))}),s.addEventListener("message",async e=>{let t=e.data;"string"==typeof t||("byteLength"in t?"blob"===o.binaryType?t=new Blob([t]):Object.setPrototypeOf(t,ArrayBuffer.prototype):"arrayBuffer"in t&&"arraybuffer"===o.binaryType&&Object.setPrototypeOf(t=await t.arrayBuffer(),ArrayBuffer.prototype)),a(new MessageEvent("message",{data:t,origin:e.origin,lastEventId:e.lastEventId,source:e.source,ports:e.ports}))}),s.addEventListener("error",()=>{a(new Event("error"))}),r.set(i,o),n.return(i)}}),e.Trap("WebSocket.prototype.binaryType",{get:e=>r.get(e.this).binaryType,set(e,t){let n=r.get(e.this);("blob"===t||"arraybuffer"===t)&&(n.binaryType=t)}}),e.Trap("WebSocket.prototype.bufferedAmount",{get:()=>0}),e.Trap("WebSocket.prototype.extensions",{get:e=>r.get(e.this).extensions}),e.Trap("WebSocket.prototype.onclose",{get:e=>r.get(e.this).onclose,set(e,t){r.get(e.this).onclose=t}}),e.Trap("WebSocket.prototype.onerror",{get:e=>r.get(e.this).onerror,set(e,t){r.get(e.this).onerror=t}}),e.Trap("WebSocket.prototype.onmessage",{get:e=>r.get(e.this).onmessage,set(e,t){r.get(e.this).onmessage=t}}),e.Trap("WebSocket.prototype.onopen",{get:e=>r.get(e.this).onopen,set(e,t){r.get(e.this).onopen=t}}),e.Trap("WebSocket.prototype.url",{get:e=>r.get(e.this).url}),e.Trap("WebSocket.prototype.protocol",{get:e=>r.get(e.this).protocol}),e.Trap("WebSocket.prototype.readyState",{get:e=>r.get(e.this).barews.readyState}),e.Proxy("WebSocket.prototype.send",{apply(e){let t=r.get(e.this);e.return(t.barews.send(e.args[0]))}}),e.Proxy("WebSocket.prototype.close",{apply(e){let t=r.get(e.this);void 0===e.args[0]&&(e.args[0]=1e3),void 0===e.args[1]&&(e.args[1]=""),e.return(t.barews.close(e.args[0],e.args[1]))}}),e.Proxy("WebSocketStream",{construct(r){let i,s,o,a={};Object.setPrototypeOf(a,r.fn.prototype),a.constructor=r.fn;let l=e.bare.createWebSocket(r.args[0],r.args[1],null,{"User-Agent":t.navigator.userAgent,Origin:e.url.origin});r.args[1]?.signal.addEventListener("abort",()=>{l.close(1e3,"")});let c={extensions:"",protocol:"",url:r.args[0],barews:l,opened:new Promise((e,t)=>{i=e,o=t}),closed:new Promise(e=>{s=e}),readable:new ReadableStream({start(e){l.addEventListener("message",async t=>{let r=t.data;"string"==typeof r||("byteLength"in r?Object.setPrototypeOf(r,ArrayBuffer.prototype):"arrayBuffer"in r&&Object.setPrototypeOf(r=await r.arrayBuffer(),ArrayBuffer.prototype)),e.enqueue(r)})}}),writable:new WritableStream({write(e){l.send(e)}})};l.addEventListener("open",()=>{i({readable:c.readable,writable:c.writable,extensions:c.extensions,protocol:c.protocol})}),l.addEventListener("close",e=>{s({code:e.code,reason:e.reason})}),l.addEventListener("error",e=>{o(e)}),n.set(a,c),r.return(a)}}),e.Trap("WebSocketStream.prototype.closed",{get:e=>n.get(e.this).closed}),e.Trap("WebSocketStream.prototype.opened",{get:e=>n.get(e.this).opened}),e.Trap("WebSocketStream.prototype.url",{get:e=>n.get(e.this).url}),e.Proxy("WebSocketStream.prototype.close",{apply(e){let t=n.get(e.this);return e.args[0]?(void 0===e.args[0].closeCode&&(e.args[0].closeCode=1e3),void 0===e.args[0].reason&&(e.args[0].reason=""),e.return(t.barews.close(e.args[0].closeCode,e.args[0].reason))):e.return(t.barews.close(1e3,""))}})}r.r(t),r.d(t,{default:()=>n})},248:function(e,t,r){r.r(t),r.d(t,{default:()=>s});var n=r(37),i=r(1472);function s(e,t){let r;t.Worker&&(0,n.U5)("syncxhr",e.url)&&(r=e.natives.construct("Worker",n.$W.files.sync));let s=Symbol("xhr original args"),o=Symbol("xhr headers");e.Proxy("XMLHttpRequest.prototype.open",{apply(t){t.args[1]&&(t.args[1]=(0,i.Oy)(t.args[1],e.meta)),void 0===t.args[2]&&(t.args[2]=!0),t.this[s]=t.args}}),e.Proxy("XMLHttpRequest.prototype.setRequestHeader",{apply(e){(e.this[o]||(e.this[o]={}))[e.args[0]]=e.args[1]}}),e.Proxy("XMLHttpRequest.prototype.send",{apply(t){let i=t.this[s];if(!i||i[2])return;if(!(0,n.U5)("syncxhr",e.url))return console.warn("ignoring request - sync xhr disabled in flags"),t.return(void 0);let a=new SharedArrayBuffer(1024,{maxByteLength:0x7fffffff}),l=new DataView(a);e.natives.call("Worker.prototype.postMessage",r,{sab:a,args:i,headers:t.this[o],body:t.args[0]});let c=performance.now();for(;0===l.getUint8(0);)if(performance.now()-c>1e3)throw Error("xhr timeout");let u=l.getUint16(1),d=l.getUint32(3),h=new Uint8Array(d);h.set(new Uint8Array(a.slice(7,7+d)));let p=new TextDecoder().decode(h),f=l.getUint32(7+d),g=new Uint8Array(f);g.set(new Uint8Array(a.slice(11+d,11+d+f)));let m=new TextDecoder().decode(g);e.RawTrap(t.this,"status",{get:()=>u}),e.RawTrap(t.this,"responseText",{get:()=>m}),e.RawTrap(t.this,"response",{get:()=>"arraybuffer"===t.this.responseType?g.buffer:m}),e.RawTrap(t.this,"responseXML",{get:()=>new DOMParser().parseFromString(m,"text/xml")}),e.RawTrap(t.this,"getAllResponseHeaders",{get:()=>()=>p}),e.RawTrap(t.this,"getResponseHeader",{get:()=>e=>{let t=RegExp(`^${e}: (.*)$`,"m").exec(p);return t?t[1]:null}}),t.return(void 0)}}),e.Trap("XMLHttpRequest.prototype.responseURL",{get:e=>(0,i.v2)(e.get())})}},7791:function(e,t,r){r.r(t),r.d(t,{default:()=>o,enabled:()=>s});var n=r(37),i=r(8665).A;let s=e=>(0,n.U5)("sourcemaps",e.url);function o(e,t){Object.defineProperty(t,n.$W.globals.pushsourcemapfn,{value:(t,r)=>{let n=performance.now();!function(e,t,r){let n=Uint8Array.from(t),i=new DataView(n.buffer),s=new TextDecoder("utf-8"),o=[],a=i.getUint32(0,!0),l=4;for(let e=0;e<a;e++){let e=i.getUint32(l,!0);l+=4;let t=i.getUint32(l,!0);l+=4;let r=i.getUint8(l);if(l+=1,0==r)o.push({type:r,start:e,size:t});else if(1==r){let a=e+t,c=i.getUint32(l,!0);l+=4;let u=s.decode(n.subarray(l,l+c));o.push({type:r,start:e,end:a,str:u})}}e.box.sourcemaps[r]=o}(e,t,r),i.time(e.meta,n,`scramtag parse for ${r}`)},enumerable:!1,writable:!1,configurable:!1}),e.Proxy("Function.prototype.toString",{apply(t){performance.now(),function(e,t){let r=t.fn.call(t.this),n=function(e){let t=e.indexOf("/*scramtag ");if(-1===t)return null;let r=e.indexOf("*/",t);if(-1===r)throw console.log(e,t,r),Error("unreachable");let n=e.substring(t+2,r).split(" ");if(3!==n.length||"scramtag"!==n[0]||!Number.isSafeInteger(+n[1]))throw console.log(e,t,r,n),Error("invalid tag");return[n[2],t,+n[1]]}(r);if(!n)return t.return(r);let[i,s,o]=n,a=o-s,l=a+r.length,c=e.box.sourcemaps[i];if(!c)return console.warn("failed to get rewrites for tag",i),t.return(r);let u=0;for(;u<c.length;)if(c[u].start<a)u++;else break;let d=u;for(;d<c.length;)if(function(e){if(0===e.type)return e.start+e.size;if(1===e.type)return e.end;throw"unreachable"}(c[d])<l)d++;else break;let h=c.slice(u,d),p="",f=0;for(let e of h)if(p+=r.slice(f,e.start-a),0===e.type)f=e.start+e.size-a;else if(1===e.type)p+=e.str,f=e.end-a;else throw"unreachable";p+=r.slice(f),t.return(p)}(e,t)}})}},9399:function(e,t,r){r.r(t),r.d(t,{default:()=>s});var n=r(236),i=r(1472);function s(e,t){e.Proxy("Worker",{construct(t){t.args[0]=(0,i.Oy)(t.args[0],e.meta)+"?dest=worker",t.args[1]&&"module"===t.args[1].type&&(t.args[0]+="&type=module");let r=t.call(),s=new n.DD;(async()=>{let t=await s.getInnerPort();e.natives.call("Worker.prototype.postMessage",r,{$scramjet$type:"baremuxinit",port:t},[t])})()}}),e.Proxy("SharedWorker",{construct(t){t.args[0]=(0,i.Oy)(t.args[0],e.meta)+"?dest=sharedworker",t.args[1]&&"string"==typeof t.args[1]&&(t.args[1]=`${e.url.origin}@${t.args[1]}`),t.args[1]&&"object"==typeof t.args[1]&&("module"===t.args[1].type&&(t.args[0]+="&type=module"),t.args[1].name&&(t.args[1].name=`${e.url.origin}@${t.args[1].name}`));let r=t.call(),s=new n.DD;(async()=>{let t=await s.getInnerPort();e.natives.call("MessagePort.prototype.postMessage",r.port,{$scramjet$type:"baremuxinit",port:t},[t])})()}}),e.Proxy("Worklet.prototype.addModule",{apply(t){t.args[0]&&(t.args[0]=(0,i.Oy)(t.args[0],e.meta)+"?dest=worklet")}})}},581:function(e,t,r){r.r(t),r.d(t,{createWrapFn:()=>a,default:()=>c,order:()=>l});var n=r(1323),i=r(2794),s=r(37),o=r(591);function a(e,t){return function(r,s){if(r===t.location)return e.locationProxy;if(r===t.eval)return o.indirectEval.bind(e,s);if(n.iswindow){if(r===t.parent)if(i.pX in t.parent)return t.parent;else return t;else if(r===t.top){let e=t;for(;;){let t=e.parent.self;if(t===e||!(i.pX in t))break;e=t}return e}}return r}}let l=4;function c(e,t){Object.defineProperty(t,s.$W.globals.wrapfn,{value:e.wrapfn,writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(t,s.$W.globals.wrappropertyfn,{value:function(e){return"location"===e||"parent"===e||"top"===e||"eval"===e?s.$W.globals.wrappropertybase+e:e},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(t,s.$W.globals.cleanrestfn,{value:function(e){},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(t.Object.prototype,s.$W.globals.wrappropertybase+"location",{get:function(){return this===t||this===t.document?e.locationProxy:this.location},set(r){if(this===t||this===t.document){e.url=r;return}this.location=r},configurable:!1,enumerable:!1}),Object.defineProperty(t.Object.prototype,s.$W.globals.wrappropertybase+"parent",{get:function(){return e.wrapfn(this.parent,!1)},set(e){this.parent=e},configurable:!1,enumerable:!1}),Object.defineProperty(t.Object.prototype,s.$W.globals.wrappropertybase+"top",{get:function(){return e.wrapfn(this.top,!1)},set(e){this.top=e},configurable:!1,enumerable:!1}),Object.defineProperty(t.Object.prototype,s.$W.globals.wrappropertybase+"eval",{get:function(){return e.wrapfn(this.eval,!0)},set(e){this.eval=e},configurable:!1,enumerable:!1}),t.$scramitize=function(e){return location,n.iswindow&&t.top,"string"==typeof e&&e.includes("scramjet"),"string"==typeof e&&e.includes(location.origin),e},Object.defineProperty(t,s.$W.globals.trysetfn,{value:function(r,n,i){return r instanceof t.Location&&(e.locationProxy.href=i,!0)},writable:!1,configurable:!1})}},1229:function(e,t,r){r.r(t),r.d(t,{SingletonBox:()=>n});class n{ownerclient;clients=[];globals=new Map;documents=new Map;locations=new Map;sourcemaps={};constructor(e){this.ownerclient=e}registerClient(e,t){this.clients.push(e),this.globals.set(t,e),this.documents.set(t.document,e),this.locations.set(t.location,e)}}},8409:function(e,t,r){r.r(t),r.d(t,{ScramjetServiceWorkerRuntime:()=>s});var n=r(1472),i=r(8665).A;class s{client;recvport;constructor(e){this.client=e,self.onconnect=t=>{let r=t.ports[0];i.log("sw","connected"),r.addEventListener("message",t=>{console.log("sw",t.data),"scramjet$type"in t.data&&("init"===t.data.scramjet$type?(this.recvport=t.data.scramjet$port,this.recvport.postMessage({scramjet$type:"init"})):o.call(this,e,t.data))}),r.start()}}hook(){this.client.global.registration={scope:this.client.url.href,active:{scriptURL:this.client.url.href,state:"activated",onstatechange:null,onerror:null,postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:e=>!1},showNotification:async()=>{},unregister:async()=>!0,update:async()=>{},installing:null,waiting:null},this.client.global.ServiceWorkerGlobalScope=this.client.global}}function o(e,t){let r=this.recvport,s=t.scramjet$type,o=t.scramjet$token,a=e.eventcallbacks.get(self);if("fetch"===s){i.log("ee",t);let s=a.filter(e=>"fetch"===e.event);if(!s)return;for(let a of s){let s=t.scramjet$request,l=new e.natives.Request((0,n.v2)(s.url),{body:s.body,headers:new Headers(s.headers),method:s.method,mode:"same-origin"});Object.defineProperty(l,"destination",{value:s.destinitation});let c=new Event("fetch");c.request=l;let u=!1;c.respondWith=e=>{u=!0,(async()=>{let t={scramjet$type:"fetch",scramjet$token:o,scramjet$response:{body:(e=await e).body,headers:Array.from(e.headers.entries()),status:e.status,statusText:e.statusText}};i.log("sw","responding",t),r.postMessage(t,[e.body])})()},i.log("to fn",c),a.proxiedCallback(new Proxy(c,{get:(e,t,r)=>"isTrusted"===t||Reflect.get(e,t)})),u||(console.log("sw","no response"),r.postMessage({scramjet$type:"fetch",scramjet$token:o,scramjet$response:!1}))}}}},9353:function(e,t,r){r.r(t),r.d(t,{default:()=>i});var n=r(1472);function i(e){e.Proxy("importScripts",{apply(t){for(let r in t.args)t.args[r]=(0,n.Oy)(t.args[r],e.meta)}})}},3402:function(e,t,r){r.d(t,{q:()=>a});var n=r(37),i=r(4869),s=r(1862),o=r(8665).A;class a extends EventTarget{db;constructor(e){super();let t=(e,r)=>{for(let n in r)r[n]instanceof Object&&n in e&&Object.assign(r[n],t(e[n],r[n]));return Object.assign(e||{},r)},r=t({prefix:"/scramjet/",globals:{wrapfn:"$scramjet$wrap",wrappropertybase:"$scramjet__",wrappropertyfn:"$scramjet$prop",cleanrestfn:"$scramjet$clean",importfn:"$scramjet$import",rewritefn:"$scramjet$rewrite",metafn:"$scramjet$meta",setrealmfn:"$scramjet$setrealm",pushsourcemapfn:"$scramjet$pushsourcemap",trysetfn:"$scramjet$tryset",templocid:"$scramjet$temploc",tempunusedid:"$scramjet$tempunused"},files:{wasm:"/scramjet.wasm.wasm",all:"/scramjet.all.js",sync:"/scramjet.sync.js"},flags:{serviceworkers:!1,syncxhr:!1,strictRewrites:!0,rewriterLogs:!1,captureErrors:!0,cleanErrors:!1,scramitize:!1,sourcemaps:!0,destructureRewrites:!1,interceptDownloads:!1,allowInvalidJs:!0},siteFlags:{},codec:{encode:e=>e?encodeURIComponent(e):e,decode:e=>e?decodeURIComponent(e):e}},e);r.codec.encode=r.codec.encode.toString(),r.codec.decode=r.codec.decode.toString(),(0,n.Nk)(r)}async init(){(0,n.Ec)(),await this.openIDB(),navigator.serviceWorker.controller?.postMessage({scramjet$type:"loadConfig",config:n.$W}),o.log("config loaded"),navigator.serviceWorker.addEventListener("message",e=>{if(!("scramjet$type"in e.data))return;let t=e.data;"download"===t.scramjet$type&&this.dispatchEvent(new s.ScramjetGlobalDownloadEvent(t.download))})}createFrame(e){return e||(e=document.createElement("iframe")),new i.X(this,e)}encodeUrl(e){if("string"==typeof e&&(e=new URL(e)),"http:"!=e.protocol&&"https:"!=e.protocol)return e.href;let t=(0,n.hD)(e.hash.slice(1));return e.hash="",n.$W.prefix+(0,n.hD)(e.href)+(t?"#"+t:"")}decodeUrl(e){e instanceof URL&&(e=e.toString());let t=location.origin+n.$W.prefix;return(0,n.P_)(e.slice(t.length))}async openIDB(){let e=indexedDB.open("$scramjet",1);return new Promise((t,r)=>{e.onsuccess=async()=>{this.db=e.result,await this.#e(),t(e.result)},e.onupgradeneeded=()=>{let t=e.result;t.objectStoreNames.contains("config")||t.createObjectStore("config"),t.objectStoreNames.contains("cookies")||t.createObjectStore("cookies"),t.objectStoreNames.contains("redirectTrackers")||t.createObjectStore("redirectTrackers"),t.objectStoreNames.contains("referrerPolicies")||t.createObjectStore("referrerPolicies"),t.objectStoreNames.contains("publicSuffixList")||t.createObjectStore("publicSuffixList")},e.onerror=()=>r(e.error)})}async #e(){if(!this.db)return void console.error("Store not ready!");let e=this.db.transaction("config","readwrite").objectStore("config").put(n.$W,"config");return new Promise((t,r)=>{e.onsuccess=t,e.onerror=r})}async modifyConfig(e){(0,n.Nk)(Object.assign({},n.$W,e)),(0,n.Ec)(),await this.#e(),navigator.serviceWorker.controller?.postMessage({scramjet$type:"loadConfig",config:n.$W})}addEventListener(e,t,r){super.addEventListener(e,t,r)}}},4869:function(e,t,r){r.d(t,{X:()=>s});var n=r(2794),i=r(8665).A;class s extends EventTarget{controller;frame;constructor(e,t){super(),this.controller=e,this.frame=t,t.name=`${Array(8).fill(0).map(()=>Math.floor(36*Math.random()).toString(36)).join("")}`,t[n.zr]=this}get client(){return this.frame.contentWindow.window[n.pX]}get url(){return this.client.url}go(e){e instanceof URL&&(e=e.toString()),i.log("navigated to",e),this.frame.src=this.controller.encodeUrl(e)}back(){this.frame.contentWindow?.history.back()}forward(){this.frame.contentWindow?.history.forward()}reload(){this.frame.contentWindow?.location.reload()}addEventListener(e,t,r){super.addEventListener(e,t,r)}}},9052:function(e,t,r){r.r(t),r.d(t,{ScramjetController:()=>i.q,ScramjetFrame:()=>n.X});var n=r(4869),i=r(3402)},8665:function(e,t,r){r.d(t,{A:()=>i});let n={log:console.log,warn:console.warn,error:console.error,debug:console.debug,info:console.info},i={fmt:function(e,t,...r){let n=Error.prepareStackTrace;Error.prepareStackTrace=(e,t)=>{t.shift(),t.shift(),t.shift();let r="";for(let e=1;e<Math.min(2,t.length);e++)t[e].getFunctionName()&&(r+=`${t[e].getFunctionName()} -> `+r);return r+(t[0].getFunctionName()||"Anonymous")};let i=function(){try{throw Error()}catch(e){return e.stack}}();Error.prepareStackTrace=n,this.print(e,i,t,...r)},print(e,t,r,...i){(n[e]||n.log)(`%c${t}%c ${r}`,`
  	background-color: ${{log:"#000",warn:"#f80",error:"#f00",debug:"transparent"}[e]};
  	color: ${{log:"#fff",warn:"#fff",error:"#fff",debug:"gray"}[e]};
  	padding: ${{log:2,warn:4,error:4,debug:0}[e]}px;
  	font-weight: bold;
  	font-family: monospace;
  	font-size: 0.9em;
  `,`${"debug"===e?"color: gray":""}`,...i)},log:function(e,...t){this.fmt("log",e,...t)},warn:function(e,...t){this.fmt("warn",e,...t)},error:function(e,...t){this.fmt("error",e,...t)},debug:function(e,...t){this.fmt("debug",e,...t)},time(e,t,r){}}},3831:function(e,t,r){r.d(t,{k:()=>s});var n=r(4322),i=r.n(n);class s{cookies={};setCookies(e,t){for(let r of e){let e=i()(r),n={domain:e.domain,sameSite:e.sameSite,...e[0]};n.domain||(n.domain="."+t.hostname),n.domain.startsWith(".")||(n.domain="."+n.domain),n.path||(n.path="/"),n.sameSite||(n.sameSite="lax"),n.expires&&(n.expires=n.expires.toString());let s=`${n.domain}@${n.path}@${n.name}`;this.cookies[s]=n}}getCookies(e,t){let r=new Date,n=Object.values(this.cookies),i=[];for(let s of n){if(s.expires&&new Date(s.expires)<r){delete this.cookies[`${s.domain}@${s.path}@${s.name}`];continue}(!s.secure||"https:"===e.protocol)&&(!s.httpOnly||!t)&&e.pathname.startsWith(s.path)&&(!s.domain.startsWith(".")||e.hostname.endsWith(s.domain.slice(1)))&&i.push(s)}return i.map(e=>`${e.name}=${e.value}`).join("; ")}load(e){if("object"==typeof e)return e;this.cookies=JSON.parse(e)}dump(){return JSON.stringify(this.cookies)}}},1427:function(e,t,r){r.d(t,{u:()=>n});class n{headers={};set(e,t){this.headers[e.toLowerCase()]=t}}},2393:function(e,t,r){r.d(t,{V:()=>o});var n=r(2614),i=r(884),s=r(1472);let o=[{fn:(e,t)=>(0,s.Oy)(e,t),src:["embed","script","img","frame","source","input","track"],href:["a","link","area","use","image"],data:["object"],action:["form"],formaction:["button","input","textarea","submit"],poster:["video"],"xlink:href":["image"]},{fn:(e,t)=>(0,s.Oy)(e,t),src:["iframe"]},{fn:(e,t)=>null,sandbox:["iframe"]},{fn:(e,t)=>e.startsWith("blob:")?(0,s.$n)(e):(0,s.Oy)(e,t),src:["video","audio"]},{fn:()=>"",integrity:["script","link"]},{fn:()=>null,nonce:"*",csp:["iframe"],credentialless:["iframe"]},{fn:(e,t)=>(0,i.PV)(e,t),srcset:["img","source"],imagesrcset:["link"]},{fn:(e,t,r)=>(0,i.Qs)(e,r,{origin:new URL(t.origin.origin),base:new URL(t.origin.origin)},!0),srcdoc:["iframe"]},{fn:(e,t)=>(0,n.s)(e,t),style:"*"},{fn:(e,t)=>"_top"===e||"_unfencedTop"===e?t.topFrameName:"_parent"===e?t.parentFrameName:e,target:["a","base"]}]},37:function(e,t,r){let n,i,s;r.d(t,{$W:()=>s,Ec:()=>a,Nk:()=>c,P_:()=>i,U5:()=>l,hD:()=>n}),r(2393),r(9381);let o=Function;function a(){n=o(`return ${s.codec.encode}`)(),i=o(`return ${s.codec.decode}`)()}function l(e,t){let r=s.flags[e];for(let r in s.siteFlags){let n=s.siteFlags[r];if(new RegExp(r).test(t.href)&&e in n)return n[e]}return r}function c(e){s=e,a()}},2614:function(e,t,r){r.d(t,{f:()=>s,s:()=>i});var n=r(1472);function i(e,t){return o("rewrite",e,t)}function s(e){return o("unrewrite",e)}function o(e,t,r){return(t=(t=new String(t).toString()).replace(/url\(['"]?(.+?)['"]?\)/gm,(t,i)=>{let s="rewrite"===e?(0,n.Oy)(i.trim(),r):(0,n.v2)(i.trim());return t.replace(i,s)})).replace(/@import\s+(url\s*?\(.{0,9999}?\)|['"].{0,9999}?['"]|.{0,9999}?)($|\s|;)/gm,(t,i)=>t.replace(i,i.replace(/^(url\(['"]?|['"]|)(.+?)(['"]|['"]?\)|)$/gm,(t,i,s,o)=>{if(i.startsWith("url"))return t;let a="rewrite"===e?(0,n.Oy)(s.trim(),r):(0,n.v2)(s.trim());return`${i}${a}${o}`})))}},4435:function(e,t,r){r.d(t,{l:()=>l});var n=r(1472),i=r(8228);let s=new Set(["cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","origin-isolation","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","clear-site-data"]),o=new Set(["location","content-location","referer"]);function a(e,t){return e.replace(/<(.*)>/gi,e=>(0,n.Oy)(e,t))}async function l(e,t,r,l){let c={};for(let t in e)c[t.toLowerCase()]=e[t];for(let e of s)delete c[e];for(let e of o)c[e]&&(c[e]=(0,n.Oy)(c[e]?.toString(),t));if("string"==typeof c.link?c.link=a(c.link,t):Array.isArray(c.link)&&(c.link=c.link.map(e=>a(e,t))),"string"==typeof c.referer){let e=new URL(c.referer),r=await l.get(e.href);if(r){let n=r.policy.toLowerCase().split(",").map(e=>e.trim());n.includes("no-referrer")||n.includes("no-referrer-when-downgrade")&&"http:"===t.origin.protocol&&"https:"===e.protocol?delete c.referer:n.includes("origin")?c.referer=e.origin:n.includes("origin-when-cross-origin")?e.origin!==t.origin.origin?c.referer=e.origin:c.referer=e.href:n.includes("same-origin")?e.origin===t.origin.origin?c.referer=e.href:delete c.referer:n.includes("strict-origin")?"http:"===t.origin.protocol&&"https:"===e.protocol?delete c.referer:c.referer=e.origin:e.origin===t.origin.origin?c.referer=e.href:"http:"===t.origin.protocol&&"https:"===e.protocol?delete c.referer:c.referer=e.origin}}return"string"==typeof c["sec-fetch-dest"]&&""===c["sec-fetch-dest"]&&(c["sec-fetch-dest"]="empty"),"string"==typeof c["sec-fetch-site"]&&"none"!==c["sec-fetch-site"]&&("string"==typeof c.referer?c["sec-fetch-site"]=await (0,i.ps)(t,new URL(c.referer),r):(console.warn("Missing referrer header; can't rewrite sec-fetch-site properly. Falling back to unsafe deletion."),delete c["sec-fetch-site"])),c}},884:function(e,t,r){r.d(t,{PV:()=>m,Qs:()=>f,Uk:()=>h,nK:()=>g});var n=r(3808),i=r(8866),s=r(6498),o=r(1472),a=r(2614),l=r(1478),c=r(37),u=r(2393),d=r(8665).A;function h(e,t){let r=JSON.stringify(e.dump()),n=`
		self.COOKIE = ${r};
		$scramjetLoadClient().loadAndHook(${JSON.stringify(c.$W)});
		if ("document" in self && document?.currentScript) {
			document.currentScript.remove();
		}
	`,i=y(p.encode(n));return[t(c.$W.files.wasm),t(c.$W.files.all),t("data:application/javascript;base64,"+i)]}let p=new TextEncoder;function f(e,t,r,c=!1){let g=performance.now(),m=function(e,t,r,c=!1){let d=new i.DV((e,t)=>t),f=new n.iX(d);if(f.write(e),f.end(),function e(t,r,n){if("base"===t.name&&void 0!==t.attribs.href&&(n.base=new URL(t.attribs.href,n.origin)),t.attribs){for(let e of u.V)for(let i in e){let s=e[i.toLowerCase()];if("function"!=typeof s&&("*"===s||s.includes(t.name))&&void 0!==t.attribs[i]){let s=t.attribs[i],o=e.fn(s,n,r);null===o?delete t.attribs[i]:t.attribs[i]=o,t.attribs[`scramjet-attr-${i}`]=s}}for(let[e,r]of Object.entries(t.attribs))b.includes(e)&&(t.attribs[`scramjet-attr-${e}`]=r,t.attribs[e]=(0,l.o)(r,`(inline ${e} on element)`,n))}if("style"===t.name&&void 0!==t.children[0]&&(t.children[0].data=(0,a.s)(t.children[0].data,n)),"script"===t.name&&"module"===t.attribs.type&&t.attribs.src&&(t.attribs.src=t.attribs.src+"?type=module"),"script"===t.name&&"importmap"===t.attribs.type&&void 0!==t.children[0]){let e=t.children[0].data;try{let r=JSON.parse(e);if(r.imports)for(let e in r.imports){let t=r.imports[e];"string"==typeof t&&(t=(0,o.Oy)(t,n),r.imports[e]=t)}t.children[0].data=JSON.stringify(r)}catch(e){console.error("Failed to parse importmap JSON:",e)}}if("script"===t.name&&/(application|text)\/javascript|module|undefined/.test(t.attribs.type)&&void 0!==t.children[0]){let e=t.children[0].data,r="module"===t.attribs.type;t.attribs["scramjet-attr-script-source-src"]=y(p.encode(e)),e=e.replace(/<!--[\s\S]*?-->/g,""),t.children[0].data=(0,l.o)(e,"(inline script element)",n,r)}if("meta"===t.name&&void 0!==t.attribs["http-equiv"]){if("content-security-policy"===t.attribs["http-equiv"].toLowerCase())t=new i.Mw(t.attribs.content);else if("refresh"===t.attribs["http-equiv"]&&t.attribs.content.includes("url")){let e=t.attribs.content.split("url=");e[1]&&(e[1]=(0,o.Oy)(e[1].trim(),n)),t.attribs.content=e.join("url=")}}if(t.childNodes)for(let i in t.childNodes)t.childNodes[i]=e(t.childNodes[i],r,n);return t}(d.root,t,r),c){let e=function e(t){if(t.type===n.RJ.vw&&"head"===t.name)return t;if(t.childNodes)for(let r of t.childNodes){let t=e(r);if(t)return t}return null}(d.root);e||(e=new i.Hg("head",{},[]),d.root.children.unshift(e)),e.children.unshift(...h(t,e=>new i.Hg("script",{src:e})))}return(0,s.A)(d.root,{encodeEntities:"utf8",decodeEntities:!1})}(e,t,r,c);return d.time(r,g,"html rewrite"),m}function g(e){let t=new i.DV((e,t)=>t),r=new n.iX(t);return r.write(e),r.end(),!function e(t){if("attribs"in t)for(let e in t.attribs){if("scramjet-attr-script-source-src"==e){t.children[0]&&"data"in t.children[0]&&(t.children[0].data=atob(t.attribs[e]));continue}e.startsWith("scramjet-attr-")&&(t.attribs[e.slice(14)]=t.attribs[e],delete t.attribs[e])}if("childNodes"in t)for(let r of t.childNodes)e(r)}(t.root),(0,s.A)(t.root,{decodeEntities:!1})}function m(e,t){return e.split(",").map(e=>e.trim()).map(e=>{let[r,...n]=e.split(/\s+/),i=(0,o.Oy)(r.trim(),t);return n.length>0?`${i} ${n.join(" ")}`:i}).join(", ")}function y(e){return btoa(Array.from(e,e=>String.fromCodePoint(e)).join(""))}let b=["onbeforexrselect","onabort","onbeforeinput","onbeforematch","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontentvisibilityautostatechange","oncontextlost","oncontextmenu","oncontextrestored","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel","onauxclick","ongotpointercapture","onlostpointercapture","onpointerdown","onpointermove","onpointerrawupdate","onpointerup","onpointercancel","onpointerover","onpointerout","onpointerenter","onpointerleave","onselectstart","onselectionchange","onanimationend","onanimationiteration","onanimationstart","ontransitionrun","ontransitionstart","ontransitionend","ontransitioncancel","oncopy","oncut","onpaste","onscrollend","onscrollsnapchange","onscrollsnapchanging"]},9381:function(e,t,r){r(2614),r(4435),r(884),r(1478),r(1472),r(2015),r(1561)},1478:function(e,t,r){r.d(t,{o:()=>o});var n=r(37),i=r(1561),s=r(8665).A;function o(e,t,r,a=!1){try{let o=function(e,t,r,n=!1){return function(e,t,r,n){let[o,a]=(0,i.nb)(r);try{let a,l=performance.now();a="string"==typeof e?o.rewrite_js(e,r.base.href,t||"(unknown)",n):o.rewrite_js_bytes(e,r.base.href,t||"(unknown)",n),s.time(r,l,`oxc rewrite for "${t||"(unknown)"}"`);let{js:c,map:u,scramtag:d,errors:h}=a;return{js:"string"==typeof e?i.su.decode(c):c,tag:d,map:u,errors:h}}finally{a()}}(e,t,r,n)}(e,t,r,a),l=o.js;if((0,n.U5)("sourcemaps",r.base)){let e=globalThis[n.$W.globals.pushsourcemapfn];if(e)e(Array.from(o.map),o.tag);else{l instanceof Uint8Array&&(l=new TextDecoder().decode(l));let e=`${n.$W.globals.pushsourcemapfn}([${o.map.join(",")}], "${o.tag}");`,t=/^\s*(['"])use strict\1;?/;l=t.test(l)?l.replace(t,`$&
${e}`):`${e}
${l}`}}if((0,n.U5)("rewriterLogs",r.base))for(let e of o.errors)console.error("oxc parse error",e);return l}catch(s){if(console.warn("failed rewriting js for",t||"(unknown)",s.message,e instanceof Uint8Array?i.su.decode(e):e),(0,n.U5)("allowInvalidJs",r.base))return e;throw s}}Error.stackTraceLimit=50},1472:function(e,t,r){r.d(t,{$n:()=>a,IP:()=>o,Oy:()=>l,v2:()=>c});var n=r(37),i=r(1478);function s(e,t){try{return new URL(e,t)}catch{return null}}function o(e,t){let r=new URL(e.substring(5));return"blob:"+t.origin.origin+r.pathname}function a(e){let t=new URL(e.substring(5));return"blob:"+location.origin+t.pathname}function l(e,t){if(e instanceof URL&&(e=e.toString()),e.startsWith("javascript:"))return"javascript:"+(0,i.o)(e.slice(11),"(javascript: url)",t);{if(e.startsWith("blob:")||e.startsWith("data:"))return location.origin+n.$W.prefix+e;if(e.startsWith("mailto:")||e.startsWith("about:"))return e;let r=t.base.href;r.startsWith("about:")&&(r=c(self.location.href));let i=s(e,r);if(!i)return e;let o=(0,n.hD)(i.hash.slice(1));return i.hash="",location.origin+n.$W.prefix+(0,n.hD)(i.href)+(o?"#"+o:"")}}function c(e){e instanceof URL&&(e=e.toString());let t=location.origin+n.$W.prefix;if(e.startsWith("javascript:"))return e;{if(e.startsWith("blob:"))return e;if(e.startsWith(t+"blob:")||e.startsWith(t+"data:"))return e.substring(t.length);if(e.startsWith("mailto:")||e.startsWith("about:"))return e;let r=s(e);if(!r)return e;let i=(0,n.P_)(r.hash.slice(1));return r.hash="",(0,n.P_)(r.href.slice(t.length)+(i?"#"+i:""))}}},1561:function(e,t,r){let n;r.d(t,{n$:()=>d,nb:()=>g,su:()=>h});var i=r(3907),s=r(37),o=r(1472),a=r(2393),l=r(2614),c=r(1478),u=r(884);async function d(){n=new Uint8Array(await fetch(s.$W.files.wasm).then(e=>e.arrayBuffer()))}self.WASM&&(n=Uint8Array.from(atob(self.WASM),e=>e.charCodeAt(0)));let h=new TextDecoder,p="\0asm".split("").map(e=>e.charCodeAt(0)),f=[];function g(e){let t;if(!(n instanceof Uint8Array))throw Error("rewriter wasm not found (was it fetched correctly?)");if(![...n.slice(0,4)].every((e,t)=>e===p[t]))throw Error("rewriter wasm does not have wasm magic (was it fetched correctly?)\nrewriter wasm contents: "+h.decode(n));(0,i.QR)({module:new WebAssembly.Module(n)});let r=f.findIndex(e=>!e.inUse),d=f.length;return -1===r?((0,s.U5)("rewriterLogs",e.base)&&console.log(`creating new rewriter, ${d} rewriters made already`),t={rewriter:new i.LW({config:s.$W,shared:{rewrite:{htmlRules:a.V,rewriteUrl:o.Oy,rewriteCss:l.s,rewriteJs:c.o,getHtmlInjectCode(e,t){let r=(0,u.Uk)(e,e=>`<script src="${e}"></script>`).join("");return t?`<head>${r}</head>`:r}}},flagEnabled:s.U5,codec:{encode:s.hD,decode:s.P_}}),inUse:!1},f.push(t)):((0,s.U5)("rewriterLogs",e.base)&&console.log(`using cached rewriter ${r} from list of ${d} rewriters`),t=f[r]),t.inUse=!0,[t.rewriter,()=>t.inUse=!1]}},2015:function(e,t,r){r.d(t,{i:()=>s});var n=r(37),i=r(1478);function s(e,t,r,s){let o="",a="module"===t,l=e=>{a?o+=`import "${n.$W.files[e]}"
`:o+=`importScripts("${n.$W.files[e]}");
`};l("wasm"),l("all"),o+=`$scramjetLoadClient().loadAndHook(${JSON.stringify(n.$W)});`;let c=(0,i.o)(e,r,s,a);return c instanceof Uint8Array&&(c=new TextDecoder().decode(c)),o+=c}},6684:function(e,t,r){r.d(t,{Sn:()=>d,YH:()=>c,Yq:()=>p,hU:()=>u,pL:()=>h,rj:()=>l});let n={none:0,"same-origin":1,"same-site":2,"cross-site":3};async function i(){let e=indexedDB.open("$scramjet",1);return new Promise((t,r)=>{e.onerror=()=>r(e.error),e.onsuccess=()=>t(e.result)})}async function s(e){let t=(await i()).transaction("redirectTrackers","readonly").objectStore("redirectTrackers");return new Promise(r=>{let n=t.get(e);n.onsuccess=()=>r(n.result||null),n.onerror=()=>r(null)})}async function o(e,t){let r=(await i()).transaction("redirectTrackers","readwrite").objectStore("redirectTrackers");return new Promise((n,i)=>{let s=r.put(t,e);s.onsuccess=()=>n(),s.onerror=()=>i(s.error)})}async function a(e){let t=(await i()).transaction("redirectTrackers","readwrite").objectStore("redirectTrackers");return new Promise((r,n)=>{let i=t.delete(e);i.onsuccess=()=>r(),i.onerror=()=>n(i.error)})}async function l(e,t,r){await s(e)||await o(e,{originalReferrer:t||"",mostRestrictiveSite:r,referrerPolicy:"",chainStarted:Date.now()})}async function c(e,t,r){let n=await s(e);n&&(await a(e),r&&(n.referrerPolicy=r),await o(t,n))}async function u(e,t){let r=await s(e);if(!r)return t;let i=n[r.mostRestrictiveSite];return(n[t]??0)>i?(r.mostRestrictiveSite=t,await o(e,r),t):r.mostRestrictiveSite}async function d(e){await a(e)}async function h(e,t,r){let n=(await i()).transaction("referrerPolicies","readwrite").objectStore("referrerPolicies"),s={policy:t,referrer:r};return new Promise((t,r)=>{let i=n.put(s,e);i.onsuccess=()=>t(),i.onerror=()=>r(i.error)})}async function p(e){let t=(await i()).transaction("referrerPolicies","readonly").objectStore("referrerPolicies");return new Promise(r=>{let n=t.get(e);n.onsuccess=()=>r(n.result||null),n.onerror=()=>r(null)})}},8228:function(e,t,r){r.d(t,{ps:()=>a});let n="publicSuffixList";async function i(){let e=indexedDB.open("$scramjet",1);return new Promise((t,r)=>{e.onerror=()=>r(e.error),e.onsuccess=()=>t(e.result)})}async function s(){let e=(await i()).transaction(n,"readonly").objectStore(n);return new Promise(t=>{let r=e.get(n);r.onsuccess=()=>t(r.result||null),r.onerror=()=>t(null)})}async function o(e){let t=(await i()).transaction("publicSuffixList","readwrite").objectStore("publicSuffixList");return new Promise((r,i)=>{let s=t.put({data:e,expiry:Date.now()+36e5},n);s.onsuccess=()=>r(),s.onerror=()=>i(s.error)})}async function a(e,t,r){return t?e.origin.origin===t.origin?"same-origin":await l(e.origin,t,r)?"same-site":"cross-site":"none"}async function l(e,t,r){return await c(e,r)===await c(t,r)}async function c(e,t){let r=await u(t),n=e.hostname.toLowerCase().split("."),i="",s=!1;for(let e of r){let t=e.startsWith("!")?e.substring(1):e;if(function(e,t){if(e.length<t.length)return!1;let r=e.length-t.length;for(let n=0;n<t.length;n++){let i=e[r+n],s=t[n];if("*"!==s&&i!==s)return!1}return!0}(n,t.split("."))){if(e.startsWith("!")){i=t,s=!0;break}!s&&t.length>i.length&&(i=t)}}if(!i)return n.slice(-2).join(".");let o=i.split(".").length,a=s?o:o+1;return n.slice(-a).join(".")}async function u(e){let t,r=await s();if(r&&Date.now()<r.expiry)return r.data;try{t=await e.fetch("https://publicsuffix.org/list/public_suffix_list.dat")}catch(e){throw Error(`Failed to fetch public suffix list: ${e}`)}let n=(await t.text()).split("\n").map(e=>{let t=e.trim(),r=t.indexOf(" ");return r>-1?t.substring(0,r):t}).filter(e=>e&&!e.startsWith("//"));return await o(n),n}},2794:function(e,t,r){r.d(t,{pX:()=>n,zr:()=>i});let n=Symbol.for("scramjet client global"),i=Symbol.for("scramjet frame handle")},5956:function(e,t,r){function n(e,t){let r=`
                errorTrace.value = ${JSON.stringify(e)};
                fetchedURL.textContent = ${JSON.stringify(t)};
                for (const node of document.querySelectorAll("#hostname")) node.textContent = ${JSON.stringify(location.hostname)};
                reload.addEventListener("click", () => location.reload());
                version.textContent = ${JSON.stringify($scramjetVersion.version)};
                build.textContent = ${JSON.stringify($scramjetVersion.build)};

                document.getElementById('copy-button').addEventListener('click', async () => {
                    const text = document.getElementById('errorTrace').value;
                    await navigator.clipboard.writeText(text);
                    const btn = document.getElementById('copy-button');
                    btn.textContent = 'Copied!';
                    setTimeout(() => btn.textContent = 'Copy', 2000);
                });
        `;return`<!DOCTYPE html>
            <html>
                <head>
                    <meta charset="utf-8" />
                    <title>Scramjet</title>
                    <style>
                    :root {
                        --deep: #080602;
                        --shallow: #181412;
                        --beach: #f1e8e1;
                        --shore: #b1a8a1;
                        --accent: #ffa938;
                        --font-sans: -apple-system, system-ui, BlinkMacSystemFont, sans-serif;
                        --font-monospace: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
                    }

                    *:not(div,p,span,ul,li,i,span) {
                        background-color: var(--deep);
                        color: var(--beach);
                        font-family: var(--font-sans);
                    }

                    textarea,
                    button {
                        background-color: var(--shallow);
                        border-radius: 0.6em;
                        padding: 0.6em;
                        border: none;
                        appearance: none;
                        font-family: var(--font-sans);
                        color: var(--beach);
                    }

                    button.primary {
                        background-color: var(--accent);
                        color: var(--deep);
                        font-weight: bold;
                    }

                    textarea {
                        resize: none;
                        height: 20em;
                        text-align: left;
                        font-family: var(--font-monospace);
                    }

                    body {
                        width: 100vw;
                        height: 100vh;
                        justify-content: center;
                        align-items: center;
                    }

                    body,
                    html,
                    #inner {
                        display: flex;
                        align-items: center;
                        flex-direction: column;
                        gap: 0.5em;
                        overflow: hidden;
                    }

                    #inner {
                        z-index: 100;
                    }

                    #cover {
                        position: absolute;
                        width: 100%;
                        height: 100%;
                        background-color: color-mix(in srgb, var(--deep) 70%, transparent);
                        z-index: 99;
                    }

                    #info {
                        display: flex;
                        flex-direction: row;
                        align-items: flex-start;
                        gap: 1em;
                    }

                    #version-wrapper {
                        width: auto;
                        text-align: right;
                        position: absolute;
                        top: 0.5rem;
                        right: 0.5rem;
                        font-size: 0.8rem;
                        color: var(--shore)!important;
                        i {
                            background-color: color-mix(in srgb, var(--deep), transparent 50%);
                            border-radius: 9999px;
                            padding: 0.2em 0.5em;
                        }
                        z-index: 101;
                    }

                    #errorTrace-wrapper {
                        position: relative;
                        width: fit-content;
                    }

                    #copy-button {
                        position: absolute;
                        top: 0.5em;
                        right: 0.5em;
                        padding: 0.23em;
                        cursor: pointer;
                        opacity: 0;
                        transition: opacity 0.4s;
                        font-size: 0.9em;
                    }

                    #errorTrace-wrapper:hover #copy-button {
                        opacity: 1;
                    }
                    </style>
                </head>
                <body>
                    <div id="cover"></div>
                    <div id="inner">
                        <h1 id="errorTitle">Uh oh!</h1>
                        <p>There was an error loading <b id="fetchedURL"></b></p>
                        <!-- <p id="errorMessage">Internal Server Error</p> -->

                        <div id="info">
                            <div id="errorTrace-wrapper">
                                <textarea id="errorTrace" cols="40" rows="10" readonly></textarea>
                                <button id="copy-button" class="primary">Copy</button>
                            </div>
                            <div id="troubleshooting">
                                <p>Try:</p>
                                <ul>
                                    <li>Checking your internet connection</li>
                                    <li>Verifying you entered the correct address</li>
                                    <li>Clearing the site data</li>
                                    <li>Contacting <b id="hostname"></b>'s administrator</li>
                                    <li>Verify the server isn't censored</li>
                                </ul>
                                <p>If you're the administrator of <b id="hostname"></b>, try:</p>
                                    <ul>
                                    <li>Restarting your server</li>
                                    <li>Updating Scramjet</li>
                                    <li>Troubleshooting the error on the <a href="https://github.com/MercuryWorkshop/scramjet" target="_blank">GitHub repository</a></li>
                                </ul>
                            </div>
                        </div>
                        <br>
                        <button id="reload" class="primary">Reload</button>
                    </div>
                    <p id="version-wrapper"><i>Scramjet v<span id="version"></span> (build <span id="build"></span>)</i></p>
                    <script src="${"data:application/javascript,"+encodeURIComponent(r)}"></script>
                </body>
            </html>
